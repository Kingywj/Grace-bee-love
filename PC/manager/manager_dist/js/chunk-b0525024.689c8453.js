(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b0525024"],{"098c":function(t,e,a){"use strict";a("fee6")},7335:function(t,e,a){"use strict";a.r(e);var s=a("f74c"),o=a("e448"),i=a("90e0"),o={name:"seckill",components:{setupSeckill:o.default},data:function(){return{selectDate:[],loading:!0,searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},setupFlag:!1,columns:[{title:"活动名称",key:"promotionName",minWidth:130,tooltip:!0},{title:"开始时间",key:"startTime",width:180},{title:"申请截止时间",key:"applyEndTime",width:180},{title:"活动状态",key:"promotionStatus",width:100,render:function(t,e){return Object(i.b)(t,e)}},{title:"申请规则",key:"seckillRule",minWidth:120,tooltip:!0},{title:"操作",slot:"action",align:"center",width:250}],data:[],total:0}},methods:{clickTabPane:function(t){this.setupFlag="setup"==t},init:function(){this.getDataList()},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList()},changePageSize:function(t){this.searchForm.pageNumber=1,this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},edit:function(t){this.$router.push({name:"manager-seckill-add",query:{id:t.id}})},manage:function(t){this.$router.push({name:"seckill-goods",query:{id:t.id}})},off:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"您确定要下架该活动吗？",onOk:function(){Object(s.P)(t.id).then(function(t){t.success&&(e.$Message.success("下架成功"),e.getDataList())})}})},expire:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"您确定要作废该活动吗？",onOk:function(){Object(s.e)(t.id).then(function(t){t.success&&(e.$Message.success("作废成功"),e.getDataList())})}})},getDataList:function(){var e=this;this.loading=!0,this.selectDate&&this.selectDate[0]&&this.selectDate[1]?(this.searchForm.startTime=this.selectDate[0].getTime(),this.searchForm.endTime=this.selectDate[1].getTime()):(this.searchForm.startTime=null,this.searchForm.endTime=null),Object(s.D)(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)})}},mounted:function(){this.init()}},a=(a("098c"),a("2877")),a=Object(a.a)(o,function(){var a=this,s=a._self._c;return s("div",{staticClass:"seckill"},[s("Card",[s("Row",[s("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:a.searchForm,inline:"","label-width":70}},[s("Form-item",{attrs:{label:"活动名称",prop:"promotionName"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入活动名称",clearable:""},model:{value:a.searchForm.promotionName,callback:function(t){a.$set(a.searchForm,"promotionName",t)},expression:"searchForm.promotionName"}})],1),s("Form-item",{attrs:{label:"活动状态",prop:"promotionStatus"}},[s("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:a.searchForm.promotionStatus,callback:function(t){a.$set(a.searchForm,"promotionStatus",t)},expression:"searchForm.promotionStatus"}},[s("Option",{attrs:{value:"NEW"}},[a._v("未开始")]),s("Option",{attrs:{value:"START"}},[a._v("已开始/上架")]),s("Option",{attrs:{value:"END"}},[a._v("已结束/下架")]),s("Option",{attrs:{value:"CLOSE"}},[a._v("紧急关闭/作废")])],1)],1),s("Form-item",{attrs:{label:"活动时间"}},[s("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",clearable:"",placeholder:"选择起始时间"},model:{value:a.selectDate,callback:function(t){a.selectDate=t},expression:"selectDate"}})],1),s("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:a.handleSearch}},[a._v("搜索")])],1)],1),s("Tabs",{staticClass:"mt_10",attrs:{value:"list"},on:{"on-click":a.clickTabPane}},[s("TabPane",{attrs:{label:"秒杀活动列表",name:"list"}},[s("Table",{ref:"table",staticClass:"mt_10",attrs:{loading:a.loading,border:"",columns:a.columns,data:a.data},scopedSlots:a._u([{key:"action",fn:function(t){var e=t.row;return["CLOSE"===e.promotionStatus||"NEW"===e.promotionStatus?s("Button",{staticClass:"mr_5",attrs:{type:"info",size:"small"},on:{click:function(t){return a.edit(e)}}},[a._v("编辑")]):s("Button",{staticClass:"mr_5",attrs:{type:"info",size:"small"},on:{click:function(t){return a.manage(e)}}},[a._v("查看")]),"NEW"==e.promotionStatus?s("Button",{staticClass:"mr_5",attrs:{type:"success",size:"small"},on:{click:function(t){return a.manage(e)}}},[a._v("管理")]):a._e(),"START"==e.promotionStatus||"NEW"==e.promotionStatus?s("Button",{staticClass:"mr_5",attrs:{type:"error",size:"small"},on:{click:function(t){return a.off(e)}}},[a._v("关闭")]):a._e(),a._v("   "),"CLOSE"==e.promotionStatus||"END"==e.promotionStatus?s("Button",{attrs:{type:"error",size:"small",ghost:""},on:{click:function(t){return a.expire(e)}}},[a._v("删除")]):a._e()]}}])}),s("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[s("Page",{staticStyle:{margin:"20px 0"},attrs:{current:a.searchForm.pageNumber,total:a.total,"page-size":a.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":a.changePage,"on-page-size-change":a.changePageSize}})],1)],1),s("TabPane",{attrs:{label:"秒杀活动设置",name:"setup"}},[a.setupFlag?s("setupSeckill"):a._e()],1)],1)],1)],1)},[],!1,null,null,null);e.default=a.exports},"90e0":function(t,e,a){"use strict";function s(t,e){var a="未知",s="red";return"NEW"==e.row.promotionStatus?(a="未开始",s="geekblue"):"START"==e.row.promotionStatus?(a="已开始",s="green"):"END"==e.row.promotionStatus?(a="已结束",s="red"):"CLOSE"==e.row.promotionStatus&&(a="已关闭",s="red"),t("div",[t("Tag",{props:{color:s}},a)])}function o(t,e){var a="未知",s="red";return"ALL"==e.row.scopeType?(a="全品类",s="default"):"PORTION_GOODS_CATEGORY"==e.row.scopeType?(a="商品分类",s="yellow"):"PORTION_SHOP_CATEGORY"==e.row.scopeType?(a="店铺分类",s="pink"):"PORTION_GOODS"==e.row.scopeType&&(a="指定商品",s="magenta"),t("div",[t("Tag",{props:{color:s}},a)])}a.d(e,"b",function(){return s}),a.d(e,"a",function(){return o})},fee6:function(t,e,a){}}]);