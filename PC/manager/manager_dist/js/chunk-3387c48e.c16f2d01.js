(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3387c48e"],{"2a97":function(e,t,o){e.exports=o.p+"img/qrcode.26457031.svg"},"51d0":function(e,t,r){"use strict";r.r(t);var o=r("c40e"),a=r("658f"),a={components:{"vue-qr":r.n(a).a},name:"goods",data:function(){var o=this;return{id:"",loading:!0,modalVisible:!1,searchForm:{pageNumber:1,pageSize:10,sort:"create_time",order:"desc"},underForm:{reason:""},submitLoading:!1,columns:[{title:"商品名称",key:"goodsName",minWidth:180,slot:"goodsSlot"},{title:"商品编号",key:"id",minWidth:150,tooltip:!0},{title:"价格",key:"price",width:130,render:function(e,t){return e("div",o.$options.filters.unitPrice(t.row.price,"￥"))}},{title:"销售模式",key:"salesModel",width:100,render:function(e,t){return"RETAIL"===t.row.salesModel?e("Tag",{props:{color:"orange"}},"零售"):"WHOLESALE"===t.row.salesModel?e("Tag",{props:{color:"magenta"}},"批发"):e("Tag",{props:{color:"volcano"}},"其他类型")}},{title:"商品类型",key:"goodsType",width:130,render:function(e,t){return"PHYSICAL_GOODS"===t.row.goodsType?e("Tag",{props:{color:"green"}},"实物商品"):"VIRTUAL_GOODS"===t.row.goodsType?e("Tag",{props:{color:"volcano"}},"虚拟商品"):e("Tag",{props:{color:"geekblue"}},"电子卡券")}},{title:"状态",key:"marketEnable",width:100,render:function(e,t){return"DOWN"==t.row.marketEnable?e("Tag",{props:{color:"volcano"}},"下架"):"UPPER"==t.row.marketEnable?e("Tag",{props:{color:"green"}},"上架"):void 0}},{title:"审核状态",key:"authFlag",width:130,render:function(e,t){return"TOBEAUDITED"==t.row.authFlag?e("Tag",{props:{color:"volcano"}},"待审核"):"PASS"==t.row.authFlag?e("Tag",{props:{color:"green"}},"通过"):"REFUSE"==t.row.authFlag?e("Tag",{props:{color:"red"}},"拒绝"):void 0}},{title:"店铺名称",key:"storeName",minWidth:100,tooltip:!0},{title:"操作",key:"action",align:"center",fixed:"right",width:150,render:function(e,t){return"DOWN"==t.row.marketEnable?e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.upper(t.row)}}},"上架"),e("Button",{props:{size:"small"},on:{click:function(){o.showDetail(t.row)}}},"查看")]):e("div",[e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.edit(t.row)}}},"下架"),e("Button",{props:{size:"small"},on:{click:function(){o.showDetail(t.row)}}},"查看")])}}],data:[],total:0}},methods:{init:function(){this.getDataList()},changePage:function(e){this.searchForm.pageNumber=e,this.getDataList()},changePageSize:function(e){this.searchForm.pageSize=e,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},getDataList:function(){var t=this;this.loading=!0,Object(o.q)(this.searchForm).then(function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)})},edit:function(e){this.id=e.id,e.underMessage?this.underForm.reason=e.underMessage:this.underForm.reason="",this.modalVisible=!0},lower:function(){var t=this;Object(o.C)(this.id,this.underForm).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.modalVisible=!1,t.getDataList())})},upper:function(e){var t=this;this.$Modal.confirm({title:"确认上架",content:"您确认要上架 "+e.goodsName+" ?",loading:!0,onOk:function(){Object(o.H)(e.id).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("上架成功"),t.getDataList())})}})},showDetail:function(e){e=e.id;this.$router.push({name:"goods-detail",query:{id:e}})}},mounted:function(){this.init()}},s=r("2877"),s=Object(s.a)(a,function(){var o=this,a=o._self._c;return a("div",{staticClass:"search"},[a("Card",[a("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:o.searchForm,inline:"","label-width":70},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.handleSearch.apply(null,arguments)}}},[a("Form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入商品名称",clearable:""},model:{value:o.searchForm.goodsName,callback:function(e){o.$set(o.searchForm,"goodsName",e)},expression:"searchForm.goodsName"}})],1),a("Form-item",{attrs:{label:"商品编号",prop:"id"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入商品编号",clearable:""},model:{value:o.searchForm.id,callback:function(e){o.$set(o.searchForm,"id",e)},expression:"searchForm.id"}})],1),a("Form-item",{attrs:{label:"店铺名称",prop:"id"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入店铺名称",clearable:""},model:{value:o.searchForm.storeName,callback:function(e){o.$set(o.searchForm,"storeName",e)},expression:"searchForm.storeName"}})],1),a("Form-item",{attrs:{label:"状态",prop:"status"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:o.searchForm.marketEnable,callback:function(e){o.$set(o.searchForm,"marketEnable",e)},expression:"searchForm.marketEnable"}},[a("Option",{attrs:{value:"UPPER"}},[o._v("上架")]),a("Option",{attrs:{value:"DOWN"}},[o._v("下架")])],1)],1),a("Form-item",{attrs:{label:"销售模式",prop:"status"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:o.searchForm.salesModel,callback:function(e){o.$set(o.searchForm,"salesModel",e)},expression:"searchForm.salesModel"}},[a("Option",{attrs:{value:"RETAIL"}},[o._v("零售")]),a("Option",{attrs:{value:"WHOLESALE"}},[o._v("批发")])],1)],1),a("Form-item",{attrs:{label:"商品类型",prop:"status"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:o.searchForm.goodsType,callback:function(e){o.$set(o.searchForm,"goodsType",e)},expression:"searchForm.goodsType"}},[a("Option",{attrs:{value:"PHYSICAL_GOODS"}},[o._v("实物商品")]),a("Option",{attrs:{value:"VIRTUAL_GOODS"}},[o._v("虚拟商品")])],1)],1),a("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:o.handleSearch}},[o._v("搜索")])],1),a("Table",{ref:"table",staticClass:"mt_10",attrs:{loading:o.loading,border:"",columns:o.columns,data:o.data},scopedSlots:o._u([{key:"goodsSlot",fn:function(e){var t=e.row;return[a("div",{staticStyle:{margin:"5px 0px",height:"80px",display:"flex"}},[a("div",{},[a("img",{staticStyle:{height:"60px","margin-top":"1px",width:"60px"},attrs:{src:t.original}})]),a("div",{staticStyle:{"margin-left":"13px"}},[a("div",{staticClass:"div-zoom"},[a("a",{on:{click:function(e){return o.linkTo(t.id,t.skuId)}}},[o._v(o._s(t.goodsName))])]),a("Poptip",{attrs:{trigger:"hover",title:"扫码在手机中查看",transfer:""}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("vue-qr",{attrs:{text:o.wapLinkTo(t.id,t.skuId),margin:0,colorDark:"#000",colorLight:"#fff",size:150}})],1),a("img",{staticClass:"hover-pointer",attrs:{src:r("2a97"),width:"20",height:"20",alt:""}})])],1)])]}}])}),a("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:o.searchForm.pageNumber,total:o.total,"page-size":o.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":o.changePage,"on-page-size-change":o.changePageSize}})],1)],1),a("Modal",{attrs:{title:"下架操作","mask-closable":!1,width:500},model:{value:o.modalVisible,callback:function(e){o.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"underForm",attrs:{model:o.underForm,"label-width":100}},[a("FormItem",{attrs:{label:"下架原因",prop:"reason"}},[a("Input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:o.underForm.reason,callback:function(e){o.$set(o.underForm,"reason",e)},expression:"underForm.reason"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){o.modalVisible=!1}}},[o._v("取消")]),a("Button",{attrs:{type:"primary",loading:o.submitLoading},on:{click:o.lower}},[o._v("提交")])],1)],1)],1)},[],!1,null,null,null);t.default=s.exports}}]);