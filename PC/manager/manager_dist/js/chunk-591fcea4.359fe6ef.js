(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-591fcea4"],{4699:function(e,t,a){"use strict";a.r(t);var s=a("c40e"),n=a("ed08"),i={name:"spec",components:{},data:function(){var a=this;return{loading:!0,modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"asc"},formValidate:{specName:[n.a.REQUIRED],specValue:[n.a.REQUIRED,n.a.VARCHAR255]},form:{specName:"",specValue:""},specValue:[],submitLoading:!1,selectList:[],selectCount:0,columns:[{type:"selection",width:60,align:"center"},{title:"规格名称",key:"specName",width:200},{title:"规格值",key:"specValue",minWidth:250,tooltip:!0},{title:"操作",key:"action",align:"center",fixed:"right",width:250,render:function(e,t){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){a.edit(t.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){a.remove(t.row)}}},"删除")])}}],data:[],total:0}},methods:{init:function(){this.getDataList()},changePage:function(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSort:function(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"===e.order&&(this.searchForm.order=""),this.getDataList()},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSelect:function(e){this.selectList=e,this.selectCount=e.length},getDataList:function(){var t=this;this.loading=!0,Object(s.v)(this.searchForm).then(function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)}),this.loading=!1},saveSpec:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.submitLoading=!0,0===t.modalType?t.data.find(function(e){return e.specName==t.form.specName})?(t.$Message.error("请勿添加重复规格名称!"),t.submitLoading=!1):(delete t.form.id,Object(s.B)(t.form).then(function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getDataList(),t.modalVisible=!1)})):Object(s.M)(t.form.id,t.form).then(function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getDataList(),t.modalVisible=!1)}))})},add:function(){this.modalType=0,this.modalTitle="添加",this.$refs.form.resetFields(),this.specValue="",delete this.form.id,this.modalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑",e)null===e[t]&&(e[t]="");var a=e.specValue;this.form.specName=e.specName,this.form.id=e.id,this.form.specValue=e.specValue,a&&a.indexOf(!1)?(this.form.specValue=a.split(","),this.specValue=this.form.specValue,this.$set(this,"specValue",this.form.specValue)):this.specValue=[],this.modalVisible=!0},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.specName+" ?",loading:!0,onOk:function(){Object(s.e)(e.id).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())})}})},delAll:function(){var a=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var t="";a.selectList.forEach(function(e){t+=e.id+","}),t=t.substring(0,t.length-1),Object(s.e)(t).then(function(e){a.$Modal.remove(),e.success&&(a.$Message.success("删除成功"),a.clearSelectAll(),a.searchForm.pageNumber=1,a.getDataList())})}})}},mounted:function(){this.init()}},a=a("2877"),a=Object(a.a)(i,function(){var t=this,a=t._self._c;return a("div",{staticClass:"search"},[a("Card",[a("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:t.searchForm,inline:"","label-width":70},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}}},[a("Form-item",{attrs:{label:"规格名称",prop:"specName"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入规格名称",clearable:""},model:{value:t.searchForm.specName,callback:function(e){t.$set(t.searchForm,"specName",e)},expression:"searchForm.specName"}})],1),a("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")])],1),a("Row",{staticClass:"operation padding-row"},[a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),a("Button",{on:{click:t.delAll}},[t._v("批量删除")])],1),a("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}}),a("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),a("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"form",attrs:{model:t.form,"label-width":100,rules:t.formValidate}},[a("FormItem",{attrs:{label:"规格名称",prop:"specName"}},[a("Input",{staticStyle:{width:"100%"},attrs:{maxlength:"30",clearable:""},model:{value:t.form.specName,callback:function(e){t.$set(t.form,"specName",e)},expression:"form.specName"}})],1),a("FormItem",{attrs:{label:"规格值",prop:"specValue"}},[a("Select",{staticStyle:{width:"100%","text-align":"left","margin-right":"10px"},attrs:{placeholder:"输入后回车添加",multiple:"",filterable:"","allow-create":"","popper-append-to-body":!1,"popper-class":"spec-values-popper"},model:{value:t.form.specValue,callback:function(e){t.$set(t.form,"specValue",e)},expression:"form.specValue"}},t._l(t.specValue,function(e){return a("Option",{key:e,attrs:{value:e,label:e}})}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.saveSpec}},[t._v("提交")])],1)],1)],1)},[],!1,null,null,null);t.default=a.exports},ed08:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var s={},n=(a.r(s),a.d(s,"qq",function(){return n}),a.d(s,"name",function(){return i}),a.d(s,"mobile",function(){return r}),a.d(s,"email",function(){return o}),a.d(s,"password",function(){return c}),a.d(s,"integer",function(){return l}),a.d(s,"Integer",function(){return u}),a.d(s,"discount",function(){return d}),a.d(s,"rate",function(){return m}),a.d(s,"money",function(){return p}),a.d(s,"IDCard",function(){return h}),a.d(s,"userName",function(){return f}),a.d(s,"URL",function(){return g}),a.d(s,"TEL",function(){return b}),a.d(s,"INTEGER",function(){return $}),a.d(s,"NUMBER",function(){return v}),a.d(s,"VARCHAR5",function(){return y}),a.d(s,"VARCHAR20",function(){return V}),a.d(s,"VARCHAR255",function(){return w}),a.d(s,"URL200",function(){return k}),a.d(s,"REQUIRED",function(){return F}),/^[1-9][0-9]{4,14}$/),i=/^[\u4e00-\u9fa5]{0,}$/,r=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,c=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,l=/^[1-9]\d*$/,u=/^[0-9]\d*$/,d=/^((0\.[1-9]{1})|(([1-9]{1})(\.\d{1})?))$/,m=/^([0-9]{1,2}|100)$/,p=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,h=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,f=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,g=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,b=/0\d{2,3}-\d{7,8}/,$={pattern:/^[0-9]\d{0,10}|0$/,message:"请输入正整数"},v={pattern:/^(\-|\+)?\d{0,10}$/,message:"请输入数字"},y={pattern:/^.{1,5}$/,message:"长度应该限制在1-5个字符"},V={pattern:/^.{1,20}$/,message:"长度应该限制在1-20个字符"},w={pattern:/^.{1,255}$/,message:"超出最大长度限制"},k={pattern:/[a-zA-z]+\:\/\/[^\s]{1,190}/,message:"请输入长度不超过200的URL地址"},F={required:!0,message:"请填写参数"}}}]);