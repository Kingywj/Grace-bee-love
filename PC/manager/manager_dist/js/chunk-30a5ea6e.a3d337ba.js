(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-30a5ea6e"],{"90e0":function(t,e,i){"use strict";function o(t,e){var i="未知",o="red";return"NEW"==e.row.promotionStatus?(i="未开始",o="geekblue"):"START"==e.row.promotionStatus?(i="已开始",o="green"):"END"==e.row.promotionStatus?(i="已结束",o="red"):"CLOSE"==e.row.promotionStatus&&(i="已关闭",o="red"),t("div",[t("Tag",{props:{color:o}},i)])}function r(t,e){var i="未知",o="red";return"ALL"==e.row.scopeType?(i="全品类",o="default"):"PORTION_GOODS_CATEGORY"==e.row.scopeType?(i="商品分类",o="yellow"):"PORTION_SHOP_CATEGORY"==e.row.scopeType?(i="店铺分类",o="pink"):"PORTION_GOODS"==e.row.scopeType&&(i="指定商品",o="magenta"),t("div",[t("Tag",{props:{color:o}},i)])}i.d(e,"b",function(){return o}),i.d(e,"a",function(){return r})},ee41:function(t,e,i){"use strict";i.r(e);var o=i("f74c"),r=i("90e0"),n={name:"coupon-activity",components:{},data:function(){return{loading:!0,modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},form:{promotionName:""},formValidate:{promotionName:[{required:!0,message:"不能为空",trigger:"blur"}]},submitLoading:!1,selectList:[],selectCount:0,columns:[{title:"活动名称",key:"promotionName",minWidth:120},{title:"活动类型",key:"couponActivityType",minWidth:120,render:function(t,e){return"REGISTERED"===e.row.couponActivityType?t("div",["注册赠券"]):t("div",["精确发券"])}},{title:"活动范围",key:"activityScope",minWidth:120,render:function(t,e){return t("div",["DESIGNATED"===e.row.activityScope?"指定会员":"全部会员"])}},{title:"活动时间",minWidth:150,render:function(t,e){if(e.row.startTime&&e.row.endTime)return t("div",{domProps:{innerHTML:e.row.startTime+"<br/>"+e.row.endTime}})}},{title:"状态",minWidth:80,key:"promotionStatus",fixed:"right",render:function(t,e){return Object(r.b)(t,e)}},{title:"操作",slot:"action",align:"center",fixed:"right",minWidth:100}],data:[],total:0}},props:{checked:{type:Boolean,default:!1}},methods:{init:function(){this.getDataList()},add:function(){this.$router.push({name:"add-coupon-activity"})},info:function(t){this.$router.push({name:"coupon-activity-info",query:{id:t.id}})},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList()},changePageSize:function(t){this.searchForm.pageNumber=1,this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,this.selectDate&&this.selectDate[0]&&this.selectDate[1]?(this.searchForm.startTime=this.selectDate[0].getTime(),this.searchForm.endTime=this.selectDate[1].getTime()):(this.searchForm.startTime=null,this.searchForm.endTime=null),Object(o.o)(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)}),this.loading=!1},edit:function(t){this.$router.push({name:"edit-platform-coupon",query:{id:t.id}})},remove:function(t){var e=this;this.$Modal.confirm({title:"确认关闭",content:"确认要关闭此优惠券活动么?关闭活动只能重新创建",loading:!0,onOk:function(){Object(o.c)(t.id).then(function(t){t.success&&(e.$Message.success("优惠券活动已关闭"),e.getDataList(),e.$Modal.remove())}).catch(function(){})}})}},mounted:function(){this.init()}},i=i("2877"),i=Object(i.a)(n,function(){var i=this,o=i._self._c;return o("div",{staticClass:"search"},[o("Card",[o("Row",{staticClass:"operation padding-row"},[o("Button",{attrs:{type:"primary"},on:{click:i.add}},[i._v("添加活动")])],1),o("Table",{ref:"table",attrs:{loading:i.loading,border:"",columns:i.columns,data:i.data,sortable:"custom"},scopedSlots:i._u([{key:"action",fn:function(t){var e=t.row;return[o("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"info",size:"small"},on:{click:function(t){return i.info(e)}}},[i._v(" 查看 ")]),!i.checked&&"START"===e.promotionStatus||"NEW"===e.promotionStatus?o("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",size:"small"},on:{click:function(t){return i.remove(e)}}},[i._v("关闭 ")]):i._e()]}}])}),o("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[o("Page",{attrs:{current:i.searchForm.pageNumber,total:i.total,"page-size":i.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":i.changePage,"on-page-size-change":i.changePageSize}})],1)],1)],1)},[],!1,null,null,null);e.default=i.exports}}]);