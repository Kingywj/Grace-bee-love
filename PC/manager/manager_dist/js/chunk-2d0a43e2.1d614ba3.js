(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0a43e2"],{"0639":function(e,t,a){"use strict";a.r(t);var s=a("0959"),o={name:"shop",data:function(){var s=this;return{loading:!0,searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",startDate:"",endDate:""},selectDate:null,columns:[{title:"店铺名称",key:"storeName",minWidth:120,align:"left"},{title:"会员名称",key:"memberName",minWidth:130,tooltip:!0},{title:"店铺地址",key:"storeAddressPath",width:300,tooltip:!0,render:function(e,t){return e("Tag",{},t.row.storeAddressPath||"暂未填写")}},{title:"是否自营",key:"selfOperated",align:"left",width:120,render:function(e,t){return e("Tag",{props:{color:t.row.selfOperated?"volcano":"green"}},t.row.selfOperated?"自营":"非自营")}},{title:"店铺状态",key:"storeDisable",align:"left",width:130,render:function(e,t){return"OPEN"==t.row.storeDisable?e("Tag",{props:{color:"green"}},"开启中"):"CLOSED"==t.row.storeDisable?e("Tag",{props:{color:"volcano"}},"已关闭"):"APPLY"==t.row.storeDisable?e("Tag",{props:{color:"geekblue"}},"申请中"):"APPLYING"==t.row.storeDisable?e("Tag",{props:{color:"purple"}},"审核中"):"REFUSED"==t.row.storeDisable?e("Tag",{props:{color:"red"}},"审核拒绝"):void 0}},{title:"创建时间",key:"createTime",align:"left",width:170},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(e,t){var a="";if("OPEN"==t.row.storeDisable)a=e("Button",{props:{size:"small",type:"error"},style:{marginRight:"5px"},on:{click:function(){s.disable(t.row)}}},"关闭");else if("CLOSED"==t.row.storeDisable)a=e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){s.enable(t.row)}}},"开启");else if("APPLYING"==t.row.storeDisable)return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){s.audit(t.row)}}},"审核"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){s.edit(t.row)}}},"修改")]);return e("div",[e("Button",{props:{size:"small"},style:{marginRight:"5px",display:s.selectedShop?"inline-block":"none"},on:{click:function(){s.callback(t.row)}}},"选择"),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){s.detail(t.row)}}},"查看"),e("Button",{props:{type:"info",size:"small",ghost:!0},style:{marginRight:"5px"},on:{click:function(){s.edit(t.row)}}},"修改"),a])}}],data:[],total:0,selectedShop:!1}},methods:{callback:function(e){this.$emit("callback",e)},init:function(){this.getDataList()},changePage:function(e){this.searchForm.pageNumber=e,this.getDataList()},changePageSize:function(e){this.searchForm.pageNumber=1,this.searchForm.pageSize=e,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},selectDateRange:function(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},getDataList:function(){var t=this;this.loading=!0,Object(s.h)(this.searchForm).then(function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)}),this.total=this.data.length,this.loading=!1},add:function(){this.$router.push({path:"/shop-operation"})},edit:function(e){this.$router.push({path:"/shop-operation",query:{shopId:e.id}})},disable:function(e){var t=this;this.$Modal.confirm({title:"确认关闭",content:"您确认要关闭店铺 "+e.storeName+" ?",loading:!0,onOk:function(){Object(s.a)(e.id).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())})}})},detail:function(e){this.$router.push({name:"shop-detail",query:{id:e.id}})},audit:function(e){var t=this;this.$Modal.confirm({title:"审核店铺",content:"您确认要审核通过店铺 "+e.storeName+" ?",okText:"通过",cancelText:"驳回",loading:!0,onOk:function(){Object(s.l)(e.id,0).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())})},onCancel:function(){Object(s.l)(e.id,1).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())})}})},enable:function(e){var t=this;this.$Modal.confirm({title:"确认开启",content:"您确认要开启店铺 "+e.storeName+" ?",loading:!0,onOk:function(){Object(s.b)(e.id).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())})}})}},mounted:function(){this.init()}},a=a("2877"),a=Object(a.a)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("Card",[e("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:t.searchForm,inline:"","label-width":70}},[e("Form-item",{attrs:{label:"会员名称",prop:"memberName"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入会员名称",clearable:""},model:{value:t.searchForm.memberName,callback:function(e){t.$set(t.searchForm,"memberName",e)},expression:"searchForm.memberName"}})],1),e("Form-item",{attrs:{label:"店铺名称",prop:"storeName"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入店铺名称",clearable:""},model:{value:t.searchForm.storeName,callback:function(e){t.$set(t.searchForm,"storeName",e)},expression:"searchForm.storeName"}})],1),e("Form-item",{attrs:{label:"店铺状态"}},[e("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.searchForm.storeDisable,callback:function(e){t.$set(t.searchForm,"storeDisable",e)},expression:"searchForm.storeDisable"}},[e("Option",{attrs:{value:"OPEN"}},[t._v("开启中")]),e("Option",{attrs:{value:"CLOSED"}},[t._v("已关闭")]),e("Option",{attrs:{value:"APPLY"}},[t._v("申请中")]),e("Option",{attrs:{value:"APPLYING"}},[t._v("审核中")]),e("Option",{attrs:{value:"REFUSED"}},[t._v("审核拒绝")])],1)],1),e("Form-item",{attrs:{label:"创建时间",prop:"createTime"}},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")])],1),e("Row",{staticClass:"operation padding-row"},[e("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")])],1),e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data}}),e("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[e("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)},[],!1,null,null,null);t.default=a.exports}}]);