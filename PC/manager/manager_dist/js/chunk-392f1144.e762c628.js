(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-392f1144"],{"21a4":function(e,t,a){},"2d45":function(e,t,a){},4798:function(e,t,a){"use strict";a.r(t);var n=a("a68a").a,a=(a("576d"),a("2877")),a=Object(a.a)(n,function(){var a=this,e=a._self._c;return e("div",[e("Card",[e("div",{staticClass:"operation mb_10"},[e("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:a.addParent}},[a._v("添加一级分类")])],1),e("tree-table",{ref:"treeTable",attrs:{size:"default",loading:a.loading,data:a.tableData,columns:a.columns,border:!0,"show-index":!1,"is-fold":!0,"expand-type":!1,"primary-key":"id"},scopedSlots:a._u([{key:"action",fn:function(t){return[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return a.edit(t.row)}}},[a._v("编辑 ")]),e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return a.remove(t.row)}}},[a._v("删除 ")]),e("Button",{directives:[{name:"show",rawName:"v-show",value:1!=t.row.level,expression:"scope.row.level != 1"}],staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return a.addChildren(t.row)}}},[a._v("添加子分类 ")])]}}])})],1),e("Modal",{attrs:{title:a.modalTitle,"mask-closable":!1,width:500},model:{value:a.modalVisible,callback:function(e){a.modalVisible=e},expression:"modalVisible"}},[e("Form",{ref:"form",attrs:{model:a.formAdd,"label-width":100,rules:a.formValidate}},[a.showParent?e("div",[e("FormItem",{attrs:{label:"上级分类",prop:"parentId"}},[a._v(" "+a._s(a.parentTitle)+" "),e("Input",{staticStyle:{width:"100%",display:"none"},attrs:{clearable:""},model:{value:a.formAdd.parentId,callback:function(e){a.$set(a.formAdd,"parentId",e)},expression:"formAdd.parentId"}})],1)],1):a._e(),e("FormItem",{attrs:{label:"分类名称",prop:"articleCategoryName"}},[e("Input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:a.formAdd.articleCategoryName,callback:function(e){a.$set(a.formAdd,"articleCategoryName",e)},expression:"formAdd.articleCategoryName"}})],1),e("FormItem",{attrs:{label:"排序值",prop:"sort"}},[e("InputNumber",{model:{value:a.formAdd.sort,callback:function(e){a.$set(a.formAdd,"sort",e)},expression:"formAdd.sort"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:function(e){a.modalVisible=!1}}},[a._v("取消")]),e("Button",{attrs:{type:"primary",loading:a.submitLoading},on:{click:a.Submit}},[a._v("提交")])],1)],1)],1)},[],!1,null,"58e1051c",null);t.default=a.exports},"576d":function(e,t,a){"use strict";a("21a4")},a68a:function(module,__webpack_exports__,__webpack_require__){"use strict";var _api_pages__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("153a"),_components_tree_table_Table_Table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("910f"),_components_lili_upload_pic_input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("da7e"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ed08");__webpack_exports__.a={name:"lili-components",components:{TreeTable:_components_tree_table_Table_Table__WEBPACK_IMPORTED_MODULE_1__.a,uploadPicInput:_components_lili_upload_pic_input__WEBPACK_IMPORTED_MODULE_2__.a},data:function(){return{submitLoading:!1,loading:!1,expandLevel:1,modalType:0,modalVisible:!1,modalTitle:"",showParent:!1,parentTitle:"",formAdd:{parentId:"",sort:1,level:0,articleCategoryName:""},formValidate:{articleCategoryName:[_utils__WEBPACK_IMPORTED_MODULE_3__.a.REQUIRED],sort:[_utils__WEBPACK_IMPORTED_MODULE_3__.a.REQUIRED,_utils__WEBPACK_IMPORTED_MODULE_3__.a.INTEGER]},columns:[{title:"分类名称",key:"articleCategoryName",witt:"100px"},{title:"排序",key:"sort",width:"100px"},{title:"操作",key:"action",align:"center",headerAlign:"center",width:"400px",type:"template",template:"action"}],tableData:[]}},methods:{init:function(){this.getAllList()},addChildren:function addChildren(v){this.modalType=0,this.modalTitle="添加子分类",this.formAdd.articleCategoryName="",this.parentTitle=v.articleCategoryName,this.formAdd.level=eval(v.level+"+1"),this.showParent=!0,delete this.formAdd.id,this.formAdd.parentId=v.id,this.modalVisible=!0},edit:function(e){this.modalType=1,this.modalTitle="编辑",this.formAdd.id=e.id,this.formAdd.articleCategoryName=e.articleCategoryName,this.formAdd.level=e.level,this.formAdd.parentId=e.parentId,this.formAdd.sort=e.sort,this.showParent=!1,this.modalVisible=!0},addParent:function(){this.modalType=0,this.modalTitle="添加一级分类",this.parentTitle="顶级分类",this.showParent=!0,this.$refs.form.resetFields(),delete this.formAdd.id,this.formAdd.parentId=0,this.modalVisible=!0},Submit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.submitLoading=!0,0===t.modalType?(delete t.formAdd.id,Object(_api_pages__WEBPACK_IMPORTED_MODULE_0__.g)(t.formAdd).then(function(e){t.submitLoading=!1,e.success&&(t.$Message.success("添加成功"),t.formAdd={parentId:"",sort:1,level:0,articleCategoryName:""}),t.getAllList(),t.modalVisible=!1})):Object(_api_pages__WEBPACK_IMPORTED_MODULE_0__.j)(t.formAdd,t.formAdd.id).then(function(e){t.submitLoading=!1,e.success&&t.$Message.success("修改成功"),t.getAllList(),t.modalVisible=!1,t.$refs.form.resetFields()}))})},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.articleCategoryName+" ?",loading:!0,onOk:function(){Object(_api_pages__WEBPACK_IMPORTED_MODULE_0__.b)(e.id).then(function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getAllList())})}})},getAllList:function(e){var a=this;this.loading=!0,Object(_api_pages__WEBPACK_IMPORTED_MODULE_0__.d)().then(function(e){var t;a.loading=!1,e.success&&(t=a.expandLevel,e.result.forEach(function(e){1==t?(0==e.level&&(e.expand=!1),e.children&&0<e.children.length&&e.children.forEach(function(e){1==e.level&&(e.expand=!1),e.children&&0<e.children.length&&e.children.forEach(function(e){2==e.level&&(e.expand=!1)})})):2==t?(0==e.level&&(e.expand=!0),e.children&&0<e.children.length&&e.children.forEach(function(e){1==e.level&&(e.expand=!1),e.children&&0<e.children.length&&e.children.forEach(function(e){2==e.level&&(e.expand=!1)})})):3==t&&(0==e.level&&(e.expand=!0),e.children&&0<e.children.length&&e.children.forEach(function(e){1==e.level&&(e.expand=!0),e.children&&0<e.children.length&&e.children.forEach(function(e){2==e.level&&(e.expand=!1)})}))}),a.tableData=e.result)})}},mounted:function(){this.init()}}},b149:function(e,t,a){"use strict";a("2d45")},da7e:function(e,t,a){"use strict";var n=a("365c"),i={name:"uploadPicInput",props:{value:String,size:{default:"default",type:String},placeholder:{type:String,default:"图片链接"},showInput:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:Number,icon:{type:String,default:"ios-cloud-upload-outline"}},data:function(){return{accessToken:{},currentValue:this.value,loading:!1,viewImage:!1,uploadFileUrl:n.nb}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")}},handleFormatError:function(e){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件"})},handleMaxSize:function(e){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件大小过大, 不得超过1M."})},beforeUpload:function(){return this.loading=!0},handleSuccess:function(e,t){this.loading=!1,e.success&&(this.currentValue=e.result,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue))},handleError:function(e,t,a){this.loading=!1,this.$Message.error(e.toString())},handleChange:function(e){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue),this.$attrs.rollback&&this.$attrs.rollback()},setCurrentValue:function(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value:function(e){this.setCurrentValue(e)}},created:function(){this.init()}},a=(a("b149"),a("2877")),a=Object(a.a)(i,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{display:"flex"}},[e("Input",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],attrs:{placeholder:t.placeholder,size:t.size,disabled:t.disabled,readonly:t.readonly,maxlength:t.maxlength},on:{"on-change":t.handleChange},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},[e("Poptip",{attrs:{slot:"append",transfer:"",trigger:"hover",title:"图片预览",placement:"right"},slot:"append"},[e("Icon",{staticClass:"see-icon",attrs:{type:"md-eye"}}),e("div",{attrs:{slot:"content"},slot:"content"},[e("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:t.currentValue,alt:"该资源不存在"}}),e("a",{staticStyle:{"margin-top":"5px","text-align":"right",display:"block"},on:{click:function(e){t.viewImage=!0}}},[t._v("查看大图")])])],1)],1),e("Upload",{ref:"up",staticClass:"upload",attrs:{action:t.uploadFileUrl,headers:t.accessToken,"on-success":t.handleSuccess,"on-error":t.handleError,format:["jpg","jpeg","png","gif","bmp"],accept:".jpg, .jpeg, .png, .gif, .bmp","max-size":1024,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.beforeUpload,"show-upload-list":!1}},[e("Button",{attrs:{loading:t.loading,size:t.size,disabled:t.disabled}},[t._v("上传图片")])],1)],1),e("Modal",{attrs:{title:"图片预览",styles:{top:"30px"},draggable:""},model:{value:t.viewImage,callback:function(e){t.viewImage=e},expression:"viewImage"}},[e("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:t.currentValue,alt:"该资源不存在"}}),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:function(e){t.viewImage=!1}}},[t._v("关闭")])],1)])],1)},[],!1,null,"75ceb5cf",null);t.a=a.exports},ed08:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={},i=(a.r(n),a.d(n,"qq",function(){return i}),a.d(n,"name",function(){return r}),a.d(n,"mobile",function(){return o}),a.d(n,"email",function(){return l}),a.d(n,"password",function(){return s}),a.d(n,"integer",function(){return d}),a.d(n,"Integer",function(){return c}),a.d(n,"discount",function(){return u}),a.d(n,"rate",function(){return p}),a.d(n,"money",function(){return _}),a.d(n,"IDCard",function(){return m}),a.d(n,"userName",function(){return f}),a.d(n,"URL",function(){return h}),a.d(n,"TEL",function(){return g}),a.d(n,"INTEGER",function(){return b}),a.d(n,"NUMBER",function(){return v}),a.d(n,"VARCHAR5",function(){return E}),a.d(n,"VARCHAR20",function(){return y}),a.d(n,"VARCHAR255",function(){return A}),a.d(n,"URL200",function(){return w}),a.d(n,"REQUIRED",function(){return I}),/^[1-9][0-9]{4,14}$/),r=/^[\u4e00-\u9fa5]{0,}$/,o=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,l=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,s=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,d=/^[1-9]\d*$/,c=/^[0-9]\d*$/,u=/^((0\.[1-9]{1})|(([1-9]{1})(\.\d{1})?))$/,p=/^([0-9]{1,2}|100)$/,_=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,m=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,f=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,h=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,g=/0\d{2,3}-\d{7,8}/,b={pattern:/^[0-9]\d{0,10}|0$/,message:"请输入正整数"},v={pattern:/^(\-|\+)?\d{0,10}$/,message:"请输入数字"},E={pattern:/^.{1,5}$/,message:"长度应该限制在1-5个字符"},y={pattern:/^.{1,20}$/,message:"长度应该限制在1-20个字符"},A={pattern:/^.{1,255}$/,message:"超出最大长度限制"},w={pattern:/[a-zA-z]+\:\/\/[^\s]{1,190}/,message:"请输入长度不超过200的URL地址"},I={required:!0,message:"请填写参数"}}}]);