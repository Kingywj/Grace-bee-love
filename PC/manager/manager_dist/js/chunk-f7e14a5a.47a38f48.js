(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f7e14a5a"],{"2d1c":function(t,e,i){"use strict";i("f3be")},4963:function(t,e,i){"use strict";i.r(e);var s=i("f74c"),o={data:function(){return{promotionStatus:"",showModal:!1,openTip:!0,loading:!1,submitLoading:!1,searchForm:{pageNumber:0,pageSize:10},total:0,selectList:[],selectCount:0,data:[],columns:[{title:"活动名称",key:"promotionName",minWidth:120},{title:"活动开始时间",key:"startTime"},{title:"报名截止时间",slot:"applyEndTime"},{title:"时间场次",slot:"hours"},{title:"活动状态",key:"promotionStatus",minWidth:80,sortable:!1,render:function(t,e){return"NEW"==e.row.promotionStatus?t("div",[t("Badge",{props:{status:"error",text:"新建"}})]):"START"==e.row.promotionStatus?t("div",[t("Badge",{props:{status:"success",text:"开始"}})]):"END"==e.row.promotionStatus?t("div",[t("Badge",{props:{status:"error",text:"结束"}})]):"CLOSE"==e.row.promotionStatus?t("div",[t("Badge",{props:{status:"error",text:"废弃"}})]):void 0}}],goodsColumns:[{title:"商品名称",key:"goodsName",minWidth:120,tooltip:!0},{title:"商品价格",slot:"originalPrice",width:110},{title:"库存",slot:"quantity",minWidth:30,width:90},{title:"活动价格",slot:"price",width:100},{title:"商家名称",key:"storeName",minWidth:100,tooltip:!0},{title:"活动场次",width:100,slot:"time"},{title:"操作",slot:"action",width:150,align:"center"}],goodsList:[],params:{seckillId:this.$route.query.id,applyStatus:"PASS",failReason:"",ids:""},rules:{failReason:[{required:!0,message:"请输入拒绝原因"}]}}},methods:{init:function(){this.getSeckillMsg()},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList(),this.clearSelectAll()},changePageSize:function(t){this.searchForm.pageNumber=1,this.searchForm.pageSize=t,this.getDataList()},clearSelectAll:function(){this.$refs.table.selectAll(!1)},getDataList:function(){var e=this;this.loading=!0,this.searchForm.seckillId=this.$route.query.id,Object(s.I)(this.searchForm).then(function(t){e.loading=!1,t.success&&t.result&&(e.goodsList=t.result.records,e.total=t.result.total)})},getSeckillMsg:function(){var e=this;Object(s.H)(this.$route.query.id).then(function(t){t.success&&t.result&&(e.data=[],e.data.push(t.result),e.promotionStatus=t.result.promotionStatus,e.getDataList())})},delGoods:function(e,i){var o=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除该商品吗?删除后不可恢复",onOk:function(){var t={seckillId:i.seckillId,id:i.id};Object(s.f)(t).then(function(t){t.success&&(o.goodsList.splice(e,1),o.$Message.success("删除成功！"))})}})},unixDate:function(t){return this.$options.filters.unixToDate(new Date(t)/1e3)},unixHours:function(t){for(var e=t.split(","),i=0;i<e.length;i++)e[i]+=":00";return e}},mounted:function(){this.init()}},i=(i("2d1c"),i("2877")),i=Object(i.a)(o,function(){var o=this,s=o._self._c;return s("div",{staticClass:"seckill-goods"},[s("Card",[s("Table",{attrs:{border:"",columns:o.columns,data:o.data},scopedSlots:o._u([{key:"applyEndTime",fn:function(t){t=t.row;return[o._v(" "+o._s(o.unixDate(t.applyEndTime))+" ")]}},{key:"hours",fn:function(t){t=t.row;return o._l(o.unixHours(t.hours),function(t){return s("Tag",{key:t},[o._v(o._s(t))])})}}])}),s("Table",{ref:"table",staticClass:"operation",attrs:{loading:o.loading,border:"",columns:o.goodsColumns,data:o.goodsList},scopedSlots:o._u([{key:"originalPrice",fn:function(t){t=t.row;return[s("div",[o._v(o._s(o._f("unitPrice")(t.originalPrice,"￥")))])]}},{key:"quantity",fn:function(t){t=t.row;return[s("div",[o._v(o._s(t.quantity))])]}},{key:"price",fn:function(t){t=t.row;return[s("div",[o._v(o._s(o._f("unitPrice")(t.price,"￥")))])]}},{key:"time",fn:function(t){t=t.row;return[s("Tag",[o._v(o._s(t.timeLine+":00"))])]}},{key:"QRCode",fn:function(t){t=t.row;return[t.QRCode?s("img",{attrs:{src:t.QRCode||"../../../assets/lili.png",width:"50px",height:"50px",alt:""}}):o._e()]}},{key:"action",fn:function(t){var e=t.row,i=t.index;return[s("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return o.delGoods(i,e)}}},[o._v("删除 ")])]}}])}),s("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[s("Page",{attrs:{current:o.searchForm.pageNumber+1,total:o.total,"page-size":o.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":o.changePage,"on-page-size-change":o.changePageSize}})],1)],1)],1)},[],!1,null,"57e91168",null);e.default=i.exports},f3be:function(t,e,i){}}]);