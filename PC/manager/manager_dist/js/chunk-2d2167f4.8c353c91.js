(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d2167f4"],{c35c:function(t,e,a){"use strict";a.r(e);var s=a("0959"),i={name:"bill",components:{},data:function(){var a=this;return{loading:!0,searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",startDate:"",endDate:"",billStatus:""},selectDate:null,selectList:[],selectCount:0,columns:[{type:"selection",width:60,align:"center"},{title:"账单号",key:"sn",minWidth:200,tooltip:!0},{title:"生成时间",key:"createTime",width:120},{title:"结算时间段",key:"startTime",width:200,render:function(t,e){return t("div",e.row.startTime+"~"+e.row.endTime)}},{title:"店铺名称",key:"storeName",minWidth:120,tooltip:!0},{title:"结算金额",key:"billPrice",width:130,render:function(t,e){return t("div",a.$options.filters.unitPrice(e.row.billPrice,"￥"))}},{title:"状态",key:"billStatus",width:100,render:function(t,e){return"OUT"==e.row.billStatus?t("Tag",{props:{color:"blue"}},"已出账"):"CHECK"==e.row.billStatus?t("Tag",{props:{color:"geekblue"}},"已对账"):"EXAMINE"==e.row.billStatus?t("Tag",{props:{color:"purple"}},"已审核"):t("Tag",{props:{color:"green"}},"已付款")}},{title:"操作",key:"action",align:"center",fixed:"right",width:120,render:function(t,e){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){a.detail(e.row)}}},"详细")])}}],data:[],total:0}},methods:{init:function(){this.getDataList()},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList()},changePageSize:function(t){this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSelect:function(t){this.selectList=t,this.selectCount=t.length},selectDateRange:function(t){t&&(this.searchForm.startDate=t[0],this.searchForm.endDate=t[1])},getDataList:function(){var e=this;this.loading=!0,this.searchForm.startTime&&(this.searchForm.startTime=this.$options.filters.unixToDate(this.searchForm.startTime/1e3)),this.searchForm.endTime&&(this.searchForm.endTime=this.$options.filters.unixToDate(this.searchForm.endTime/1e3)),s.d(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)}),this.total=this.data.length,this.loading=!1},detail:function(t){t=t.id;this.$router.push({name:"bill-detail",query:{id:t}})},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+t.name+" ?",loading:!0,onOk:function(){e.deleteRequest("/bill/delByIds/"+t.id).then(function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getDataList())})}})},delAll:function(){var a=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var e="";a.selectList.forEach(function(t){e+=t.id+","}),e=e.substring(0,e.length-1),a.deleteRequest("/bill/delByIds/"+e).then(function(t){a.$Modal.remove(),t.success&&(a.$Message.success("操作成功"),a.getDataList())})}})}},mounted:function(){this.init()}},a=a("2877"),a=Object(a.a)(i,function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",[t("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:"","label-width":70}},[t("Form-item",{attrs:{label:"账单编号",prop:"sn"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入账单编号",clearable:""},model:{value:e.searchForm.sn,callback:function(t){e.$set(e.searchForm,"sn",t)},expression:"searchForm.sn"}})],1),t("Form-item",{attrs:{label:"出帐时间",prop:"createTime"}},[t("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",format:"yyyy-MM-dd HH:mm:ss",clearable:"",placeholder:"选择起始时间"},on:{"on-change":e.selectDateRange},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1),t("Form-item",{attrs:{label:"筛选状态"}},[t("Select",{staticStyle:{width:"160px"},attrs:{clearable:""},model:{value:e.searchForm.billStatus,callback:function(t){e.$set(e.searchForm,"billStatus",t)},expression:"searchForm.billStatus"}},[t("Option",{attrs:{value:"OUT"}},[e._v("已出账")]),t("Option",{attrs:{value:"CHECK"}},[e._v("已对账")]),t("Option",{attrs:{value:"EXAMINE"}},[e._v("已审核")]),t("Option",{attrs:{value:"COMPLETE"}},[e._v("已付款")])],1)],1),t("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),t("Row",{staticClass:"operation padding-row"}),t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-selection-change":e.changeSelect}}),t("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)},[],!1,null,null,null);e.default=a.exports}}]);