(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2b4460ca"],{"21fa":function(t,e,a){},"25c4":function(t,e,a){"use strict";a("21fa")},"5eff":function(t,e,a){"use strict";a.r(e);var o=a("f74c"),r=a("90e0"),s={name:"pintuan",data:function(){return{selectDate:[],loading:!0,searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},columns:[{title:"活动名称",key:"promotionName",minWidth:150,tooltip:!0},{title:"状态",key:"promotionStatus",width:110,render:function(t,e){return Object(r.b)(t,e)}},{title:"所属店铺",key:"storeName",minWidth:120,tooltip:!0},{title:"活动开始时间",key:"startTime",width:180},{title:"活动结束时间",key:"endTime",width:180},{fixed:"right",title:"操作",slot:"action",align:"center",width:200}],data:[],total:0}},methods:{init:function(){this.getDataList()},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList(),this.clearSelectAll()},changePageSize:function(t){this.searchForm.pageNumber=1,this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,this.selectDate&&this.selectDate[0]&&this.selectDate[1]?(this.searchForm.startTime=this.selectDate[0].getTime(),this.searchForm.endTime=this.selectDate[1].getTime()):(this.searchForm.startTime=null,this.searchForm.endTime=null),Object(o.x)(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)})},view:function(t){this.$router.push({name:"pintuan-goods",query:{id:t.id}})},close:function(t){var e=this;this.$Modal.confirm({title:"确认关闭",content:"您确认要关闭此拼团活动?",loading:!0,onOk:function(){Object(o.K)(t.id).then(function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getDataList())})}})}},mounted:function(){this.init()}},a=(a("25c4"),a("2877")),a=Object(a.a)(s,function(){var a=this,o=a._self._c;return o("div",{staticClass:"search"},[o("Card",[o("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:a.searchForm,inline:"","label-width":70}},[o("Form-item",{attrs:{label:"活动名称",prop:"promotionName"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入活动名称",clearable:""},model:{value:a.searchForm.promotionName,callback:function(t){a.$set(a.searchForm,"promotionName",t)},expression:"searchForm.promotionName"}})],1),o("Form-item",{attrs:{label:"活动状态",prop:"promotionStatus"}},[o("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:a.searchForm.promotionStatus,callback:function(t){a.$set(a.searchForm,"promotionStatus",t)},expression:"searchForm.promotionStatus"}},[o("Option",{attrs:{value:"NEW"}},[a._v("未开始")]),o("Option",{attrs:{value:"START"}},[a._v("已开始/上架")]),o("Option",{attrs:{value:"END"}},[a._v("已结束/下架")]),o("Option",{attrs:{value:"CLOSE"}},[a._v("紧急关闭/作废")])],1)],1),o("Form-item",{attrs:{label:"活动时间"}},[o("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",clearable:"",placeholder:"选择起始时间"},model:{value:a.selectDate,callback:function(t){a.selectDate=t},expression:"selectDate"}})],1),o("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:a.handleSearch}},[a._v("搜索")])],1),o("Table",{ref:"table",staticClass:"mt_10",attrs:{loading:a.loading,border:"",columns:a.columns,data:a.data},scopedSlots:a._u([{key:"action",fn:function(t){var e=t.row;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(t){return a.view(e)}}},[a._v("查看")]),"START"===e.promotionStatus||"NEW"===e.promotionStatus?o("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.close(e)}}},[a._v("关闭 ")]):a._e()]}}])}),o("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[o("Page",{attrs:{current:a.searchForm.pageNumber,total:a.total,"page-size":a.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":a.changePage,"on-page-size-change":a.changePageSize}})],1)],1)],1)},[],!1,null,"915ede56",null);e.default=a.exports},"90e0":function(t,e,a){"use strict";function o(t,e){var a="未知",o="red";return"NEW"==e.row.promotionStatus?(a="未开始",o="geekblue"):"START"==e.row.promotionStatus?(a="已开始",o="green"):"END"==e.row.promotionStatus?(a="已结束",o="red"):"CLOSE"==e.row.promotionStatus&&(a="已关闭",o="red"),t("div",[t("Tag",{props:{color:o}},a)])}function r(t,e){var a="未知",o="red";return"ALL"==e.row.scopeType?(a="全品类",o="default"):"PORTION_GOODS_CATEGORY"==e.row.scopeType?(a="商品分类",o="yellow"):"PORTION_SHOP_CATEGORY"==e.row.scopeType?(a="店铺分类",o="pink"):"PORTION_GOODS"==e.row.scopeType&&(a="指定商品",o="magenta"),t("div",[t("Tag",{props:{color:o}},a)])}a.d(e,"b",function(){return o}),a.d(e,"a",function(){return r})}}]);