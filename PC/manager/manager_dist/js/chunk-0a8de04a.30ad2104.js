(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0a8de04a"],{"2a97":function(t,e,o){t.exports=o.p+"img/qrcode.26457031.svg"},"5af9":function(t,e,r){"use strict";r.r(e);var i=r("f74c"),a=r("90e0"),o=r("658f"),o={name:"coupon",components:{"vue-qr":r.n(o).a},data:function(){var o=this;return{selectDate:[],loading:!0,modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",goodsName:""},form:{},formValidate:{},submitLoading:!1,selectList:[],selectCount:0,columns:[{title:"商品名称",slot:"goodsName",minWidth:150,tooltip:!0},{title:"库存数量",slot:"quantity",width:100},{title:"剩余活动库存",key:"stock",width:110},{title:"每人最低砍",key:"lowestPrice",minWidth:100,render:function(t,e){return t("div",o.$options.filters.unitPrice(e.row.lowestPrice,"￥"))}},{title:"每人最高砍",key:"highestPrice",minWidth:100,tooltip:!0,render:function(t,e){return t("div",o.$options.filters.unitPrice(e.row.highestPrice,"￥"))}},{title:"结算价格",key:"settlementPrice",minWidth:100,render:function(t,e){return t("div",o.$options.filters.unitPrice(e.row.settlementPrice,"￥"))}},{title:"活动开始时间",slot:"startTime",minWidth:150},{title:"状态",key:"promotionStatus",render:function(t,e){return Object(a.b)(t,e)},width:100},{title:"操作",slot:"action",align:"center",fixed:"right",width:150}],data:[],total:0,selectCoupon:[]}},props:{},watch:{$route:function(t,e){"/promotions/manager-coupon"==t.fullPath&&this.init()}},methods:{check:function(){this.$emit("selected",this.selectCoupon)},init:function(){this.getDataList()},add:function(){this.$router.push({name:"add-kanJia-activity-goods"})},info:function(t){this.$router.push({name:"platform-coupon-info",query:{id:t.id}})},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList()},changePageSize:function(t){this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=0,this.searchForm.pageSize=10,this.getDataList()},changeSort:function(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"===t.order&&(this.searchForm.order=""),this.getDataList()},clearSelectAll:function(){this.$refs.table.selectAll(!1)},getDataList:function(){var e=this;this.loading=!0,this.selectDate&&this.selectDate[0]&&this.selectDate[1]?(this.searchForm.startTime=this.selectDate[0].getTime(),this.searchForm.endTime=this.selectDate[1].getTime()):(this.searchForm.startTime=null,this.searchForm.endTime=null),Object(i.s)(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)}),this.total=this.data.length,this.loading=!1},edit:function(t,e){t={id:t.id};e&&(t.onlyView=!0),this.$router.push({name:"edit-kanJia-activity-goods",query:t})},delAll:function(t){var o=this;this.$Modal.confirm({title:"确认删除",content:"确认需要删除此砍价商品",loading:!0,onOk:function(){var e=[];o.selectList.forEach(function(t){e.push(t.id)}),Object(i.d)(t.id).then(function(t){o.$Modal.remove(),t.success&&(o.$Message.success("删除成功"),o.getDataList())})}})}},mounted:function(){this.init()}},s=(r("d87a"),r("2877")),s=Object(s.a)(o,function(){var o=this,i=o._self._c;return i("div",{staticClass:"search"},[i("Card",[i("Row",[i("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:o.searchForm,inline:"","label-width":70}},[i("Form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[i("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入商品名称",clearable:""},model:{value:o.searchForm.goodsName,callback:function(t){o.$set(o.searchForm,"goodsName",t)},expression:"searchForm.goodsName"}})],1),i("Form-item",{attrs:{label:"活动状态",prop:"promotionStatus"}},[i("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:o.searchForm.promotionStatus,callback:function(t){o.$set(o.searchForm,"promotionStatus",t)},expression:"searchForm.promotionStatus"}},[i("Option",{attrs:{value:"NEW"}},[o._v("未开始")]),i("Option",{attrs:{value:"START"}},[o._v("已开始/上架")]),i("Option",{attrs:{value:"END"}},[o._v("已结束/下架")]),i("Option",{attrs:{value:"CLOSE"}},[o._v("紧急关闭/作废")])],1)],1),i("Form-item",{attrs:{label:"活动时间"}},[i("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",clearable:"",placeholder:"选择起始时间"},model:{value:o.selectDate,callback:function(t){o.selectDate=t},expression:"selectDate"}})],1),i("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:o.handleSearch}},[o._v("搜索")])],1)],1),i("Row",{staticClass:"operation padding-row"},[i("Button",{attrs:{type:"primary"},on:{click:o.add}},[o._v("添加砍价")])],1),i("Table",{ref:"table",attrs:{loading:o.loading,border:"",columns:o.columns,data:o.data,sortable:"custom"},on:{"on-sort-change":o.changeSort},scopedSlots:o._u([{key:"goodsName",fn:function(t){var e=t.row;return[i("div",[i("a",{staticClass:"mr_10",on:{click:function(t){return o.linkTo(e.goodsId,e.skuId)}}},[o._v(o._s(e.goodsName))]),i("Poptip",{attrs:{trigger:"hover",title:"扫码在手机中查看",transfer:""}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("vue-qr",{attrs:{text:o.wapLinkTo(e.goodsId,e.skuId),margin:0,colorDark:"#000",colorLight:"#fff",size:150}})],1),i("img",{staticClass:"hover-pointer",staticStyle:{"vertical-align":"middle"},attrs:{src:r("2a97"),width:"20",height:"20",alt:""}})])],1)]}},{key:"startTime",fn:function(t){t=t.row;return[i("div",[o._v(o._s(t.startTime))]),i("div",[o._v(o._s(t.endTime))])]}},{key:"quantity",fn:function(t){t=t.row;return[i("div",[o._v(o._s(t.stock))])]}},{key:"action",fn:function(t){var e=t.row;return["CLOSE"===e.promotionStatus||"NEW"===e.promotionStatus?i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"info",size:"small"},on:{click:function(t){return o.edit(e)}}},[o._v("编辑 ")]):i("Button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:function(t){return o.edit(e,"onlyView")}}},[o._v("查看 ")]),i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",size:"small"},on:{click:function(t){return o.delAll(e)}}},[o._v("删除 ")])]}}])}),i("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{current:o.searchForm.pageNumber,total:o.total,"page-size":o.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":o.changePage,"on-page-size-change":o.changePageSize}})],1)],1)],1)},[],!1,null,null,null);e.default=s.exports},"8bb2":function(t,e,o){},"90e0":function(t,e,o){"use strict";function i(t,e){var o="未知",i="red";return"NEW"==e.row.promotionStatus?(o="未开始",i="geekblue"):"START"==e.row.promotionStatus?(o="已开始",i="green"):"END"==e.row.promotionStatus?(o="已结束",i="red"):"CLOSE"==e.row.promotionStatus&&(o="已关闭",i="red"),t("div",[t("Tag",{props:{color:i}},o)])}function r(t,e){var o="未知",i="red";return"ALL"==e.row.scopeType?(o="全品类",i="default"):"PORTION_GOODS_CATEGORY"==e.row.scopeType?(o="商品分类",i="yellow"):"PORTION_SHOP_CATEGORY"==e.row.scopeType?(o="店铺分类",i="pink"):"PORTION_GOODS"==e.row.scopeType&&(o="指定商品",i="magenta"),t("div",[t("Tag",{props:{color:i}},o)])}o.d(e,"b",function(){return i}),o.d(e,"a",function(){return r})},d87a:function(t,e,o){"use strict";o("8bb2")}}]);