(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6133741d"],{"2a97":function(t,e,a){t.exports=a.p+"img/qrcode.26457031.svg"},8803:function(t,e,a){},c8d7:function(t,e,n){"use strict";n.r(e);var a=n("f8b7"),r=n("658f"),r={components:{"vue-qr":n.n(r).a},name:"orderDetail",data:function(){return{sn:"",logisticsModal:!1,logisticsInfo:{},afterSaleInfo:{},afterSaleImage:[],submitLoading:!1,storeMsg:{},params:{serviceStatus:"PASS",remark:""},refundPriceForm:{remark:""},afterSaleStatusList:[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]}},methods:{getDetail:function(){var e=this;this.loading=!0,a.g(this.sn).then(function(t){e.loading=!1,t.success&&(e.afterSaleInfo=t.result,e.afterSaleInfo.showDelivery=e.showDelivery(e.afterSaleInfo.serviceStatus),e.afterSaleInfo.serviceName=e.filterOrderStatus(e.afterSaleInfo.serviceStatus),e.afterSaleImage=(t.result.afterSaleImage||"").split(","),e.afterSaleInfo.mconsigneeAddressPath&&(e.afterSaleInfo.mconsigneeAddressPath=e.afterSaleInfo.mconsigneeAddressPath.replaceAll(","," ")),e.$set(e.params,"actualRefundPrice",e.afterSaleInfo.applyRefundPrice),e.afterSaleInfo.showDelivery&&a.v(e.sn).then(function(t){t.success&&((t=t.result).salesConsigneeAddressPath=t.salesConsigneeAddressPath.replaceAll(",",""),e.storeMsg=t)}))})},refundPriceSubmit:function(){var e=this;""!=this.refundPriceForm.remark?this.$Modal.confirm({title:"确认退款",content:"请确认退款？",loading:!0,onOk:function(){a.u(e.sn,e.refundPriceForm).then(function(t){e.$Modal.remove(),t.success&&(e.$Message.success("收款成功"),e.getDetail())})}}):this.$Message.error("请输入退款备注")},logisticsSeller:function(){var e=this;this.logisticsModal=!0,a.j(this.sn).then(function(t){t.success&&null!=t.result&&(e.logisticsInfo=t.result)})},logisticsClose:function(){this.logisticsModal=!1},handleSubmit:function(){var e=this;""!=this.params.remark?""!=this.params.actualRefundPrice?a.c(this.sn,this.params).then(function(t){e.submitLoading=!1,t.success&&(e.$Message.success("审核成功"),e.params.remark="",e.getDetail())}):this.$Message.error("请输入退款金额"):this.$Message.error("请输入备注信息")},filterOrderStatus:function(e){return this.afterSaleStatusList.filter(function(t){return t.status===e})[0].name},showDelivery:function(a){var r=!1;return this.afterSaleStatusList.forEach(function(t,e){t.status===a&&3<=e&&6!==e&&(r=!0)}),r}},mounted:function(){this.sn=this.$route.query.sn,this.getDetail()}},s=(n("ddef"),n("2877")),s=Object(s.a)(r,function(){var a=this,r=a._self._c;return r("div",{staticClass:"search"},[r("Card",[r("div",{staticClass:"main-content"},[r("div",{staticClass:"div-flow-left"},[r("div",{staticClass:"div-form-default"},[r("h3",[a._v("退货申请")]),r("dl",[r("dt",[a._v("退货状态")]),r("dd",[a._v(a._s(a.afterSaleInfo.serviceName))])]),r("dl",[r("dt",[a._v("退货退款编号")]),r("dd",[a._v(a._s(a.afterSaleInfo.sn))])]),r("dl",[r("dt",[a._v("退货退款原因")]),r("dd",[a._v(a._s(a.afterSaleInfo.reason))])]),r("dl",[r("dt",[a._v("申请退款金额")]),r("dd",[a._v("￥"+a._s(a._f("unitPrice")(a.afterSaleInfo.applyRefundPrice)))])]),a.afterSaleInfo.actualRefundPrice?r("dl",[r("dt",[a._v("实际退款金额")]),r("dd",[a._v("￥"+a._s(a._f("unitPrice")(a.afterSaleInfo.actualRefundPrice)))])]):a._e(),a.afterSaleInfo.refundPoint?r("dl",[r("dt",[a._v("退还积分")]),r("dd",[a._v(a._s(a.afterSaleInfo.refundPoint))])]):a._e(),r("dl",[r("dt",[a._v("退货数量")]),r("dd",[a._v(a._s(a.afterSaleInfo.num))])]),r("dl",[r("dt",[a._v("问题描述")]),r("dd",[a._v(a._s(a.afterSaleInfo.problemDesc))])]),r("dl",[r("dt",[a._v("凭证")]),""==a.afterSaleImage?r("dd",[a._v("暂无凭证")]):r("dd",a._l(a.afterSaleImage,function(t,e){return r("div",{key:e,staticClass:"div-img"},[r("img",{staticClass:"complain-img",attrs:{src:t}})])}),0)])]),"APPLY"==a.afterSaleInfo.serviceStatus?r("div",{staticClass:"div-form-default"},[r("h3",[a._v("处理意见")]),r("dl",[r("dt",[a._v("商家")]),r("dd",[r("div",{staticClass:"div-content"},[a._v(" "+a._s(a.afterSaleInfo.storeName)+" ")])])]),r("dl",[r("dt",[a._v("是否同意")]),r("dd",[r("div",{staticClass:"div-content"},[r("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:a.params.serviceStatus,callback:function(t){a.$set(a.params,"serviceStatus",t)},expression:"params.serviceStatus"}},[r("Radio",{attrs:{label:"PASS"}},[r("span",[a._v("同意")])]),r("Radio",{attrs:{label:"REFUSE"}},[r("span",[a._v("拒绝")])])],1)],1)])]),r("dl",[r("dt",[a._v("申请退款金额")]),r("dd",[a._v(a._s(a._f("unitPrice")(a.afterSaleInfo.applyRefundPrice,"￥")))])]),r("dl",[r("dt",[a._v("实际退款金额")]),r("dd",[r("Input",{staticStyle:{width:"260px"},model:{value:a.params.actualRefundPrice,callback:function(t){a.$set(a.params,"actualRefundPrice",t)},expression:"params.actualRefundPrice"}})],1)]),r("dl",[r("dt",[a._v("备注信息")]),r("dd",[r("Input",{staticStyle:{width:"260px"},attrs:{type:"textarea",maxlength:"200",rows:4,clearable:""},model:{value:a.params.remark,callback:function(t){a.$set(a.params,"remark",t)},expression:"params.remark"}})],1)]),r("dl",[r("dd",[r("div",{staticStyle:{"text-align":"right",width:"45%","margin-top":"10px"}},[r("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",loading:a.submitLoading},on:{click:a.handleSubmit}},[a._v(" 确定 ")])],1)])])]):a._e(),"APPLY"!=a.afterSaleInfo.serviceStatus?r("div",{staticClass:"div-form-default"},[r("h3",[a._v("商家处理")]),r("dl",[r("dt",[a._v("商家")]),r("dd",[r("div",{staticClass:"div-content"},[a._v(" "+a._s(a.afterSaleInfo.storeName)+" ")])])]),r("dl",[r("dt",[a._v("备注信息")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.auditRemark||"暂无备注信息")+" ")])])]):a._e()]),r("div",{staticClass:"div-flow-center"}),r("div",{staticClass:"div-flow-right"},[r("div",{staticClass:"div-form-default"},[r("h3",[a._v("相关商品交易信息")]),r("dl",[r("dt",[r("img",{attrs:{src:a.afterSaleInfo.goodsImage,height:"60px"}})]),r("dd",[r("div",{staticClass:"div-zoom"},[r("a",{on:{click:function(t){return a.linkTo(a.afterSaleInfo.goodsId,a.afterSaleInfo.skuId)}}},[a._v(a._s(a.afterSaleInfo.goodsName))]),r("Poptip",{attrs:{trigger:"hover",title:"扫码在手机中查看",transfer:""}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("vue-qr",{attrs:{text:a.wapLinkTo(a.afterSaleInfo.goodsId,a.afterSaleInfo.skuId),margin:0,colorDark:"#000",colorLight:"#fff",size:150}})],1),r("img",{staticClass:"hover-pointer ml_10",staticStyle:{"vertical-align":"middle"},attrs:{src:n("2a97"),width:"20",height:"20",alt:""}})])],1),r("div",{staticStyle:{color:"#999","font-size":"10px"}},[a._v(" 数量：x"+a._s(a.afterSaleInfo.num)+" ")])])])]),r("div",{staticClass:"div-form-default"},[r("h3",[a._v("订单相关信息")]),r("dl",[r("dt",[a._v("订单编号")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.orderSn)+" ")])]),a.afterSaleInfo.bankDepositName?r("dl",[r("dt",[a._v("银行开户行")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.bankDepositName)+" ")])]):a._e(),a.afterSaleInfo.bankAccountName?r("dl",[r("dt",[a._v("银行开户名")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.bankAccountName)+" ")])]):a._e(),a.afterSaleInfo.bankAccountNumber?r("dl",[r("dt",[a._v("银行卡号")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.bankAccountNumber)+" ")])]):a._e()]),a.afterSaleInfo.afterSaleAllowOperationVO&&a.afterSaleInfo.afterSaleAllowOperationVO.refund?r("div",{staticClass:"div-form-default"},[r("h3",[a._v("平台退款")]),r("dl",[r("dt",[a._v("银行开户行")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.bankDepositName)+" ")])]),r("dl",[r("dt",[a._v("银行开户名")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.bankAccountName)+" ")])]),r("dl",[r("dt",[a._v("银行卡号")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.bankAccountNumber)+" ")])]),r("dl",[r("dt",[a._v("备注信息")]),r("dd",[r("Input",{staticStyle:{width:"260px"},attrs:{type:"textarea",maxlength:"200",rows:4,clearable:""},model:{value:a.refundPriceForm.remark,callback:function(t){a.$set(a.refundPriceForm,"remark",t)},expression:"refundPriceForm.remark"}})],1)]),r("dl",[r("dt",[a._v("操作")]),r("dd",[r("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",loading:a.submitLoading},on:{click:a.refundPriceSubmit}},[a._v(" 退款 ")])],1)])]):a._e(),a.afterSaleInfo.showDelivery&&"RETURN_GOODS"===a.afterSaleInfo.serviceType?r("div",{staticClass:"div-form-default"},[r("h3",[a._v("物流信息")]),r("dl",[r("dt",[a._v("收货商家")]),r("dd",[a._v(a._s(a.afterSaleInfo.storeName))])]),r("dl",[r("dt",[a._v("收货商家手机")]),r("dd",[a._v(a._s(a.storeMsg.salesConsigneeMobile))])]),r("dl",[r("dt",[a._v("收货地址")]),r("dd",[a._v(" "+a._s(a.storeMsg.salesConsigneeAddressPath)+" "+a._s(a.storeMsg.salesConsigneeDetail)+" ")])]),r("dl",[r("dt",[a._v("物流公司")]),r("dd",[a._v(a._s(a.afterSaleInfo.mlogisticsName))])]),r("dl",[r("dt",[a._v("物流单号")]),r("dd",[a._v(" "+a._s(a.afterSaleInfo.mlogisticsNo)+" ")])]),r("dl",[r("dt",[a._v("操作")]),r("dd",[r("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"info",loading:a.submitLoading},on:{click:function(t){return a.logisticsSeller()}}},[a._v(" 查询物流 ")])],1)])]):a._e()])])]),r("Modal",{attrs:{width:"40"},model:{value:a.logisticsModal,callback:function(t){a.logisticsModal=t},expression:"logisticsModal"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[a._v("查询物流")])]),r("div",{staticClass:"layui-layer-wrap"},[r("dl",[r("dt",[a._v("售后单号：")]),r("dd",[r("div",{staticClass:"text-box"},[a._v(a._s(a.sn))])])]),r("dl",[r("dt",[a._v("物流公司：")]),r("dd",[r("div",{staticClass:"text-box"},[a._v(a._s(a.afterSaleInfo.mlogisticsName))])])]),r("dl",[r("dt",[a._v("快递单号：")]),r("dd",[r("div",{staticClass:"text-box"},[a._v(a._s(a.afterSaleInfo.mlogisticsNo))])])]),r("div",{staticClass:"div-express-log"},[r("ul",{staticClass:"express-log"},[Object.keys(a.logisticsInfo).length?a._l(a.logisticsInfo.traces,function(t,e){return r("li",{key:e},[r("span",{staticClass:"time"},[a._v(a._s(t.AcceptTime))]),r("span",{staticClass:"detail"},[a._v(a._s(t.AcceptStation))])])}):[r("li",{staticStyle:{"text-align":"center"}},[a._v("暂无物流信息")])]],2)])]),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:a.logisticsClose}},[a._v("取消")])],1)])],1)},[],!1,null,null,null);e.default=s.exports},ddef:function(t,e,a){"use strict";a("8803")},f8b7:function(t,e,a){"use strict";a.d(e,"w",function(){return n}),a.d(e,"i",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"e",function(){return d}),a.d(e,"c",function(){return c}),a.d(e,"k",function(){return l}),a.d(e,"l",function(){return f}),a.d(e,"b",function(){return u}),a.d(e,"p",function(){return v}),a.d(e,"m",function(){return _}),a.d(e,"r",function(){return m}),a.d(e,"q",function(){return S}),a.d(e,"x",function(){return g}),a.d(e,"o",function(){return p}),a.d(e,"f",function(){return h}),a.d(e,"h",function(){return I}),a.d(e,"g",function(){return b}),a.d(e,"j",function(){return k}),a.d(e,"n",function(){return P}),a.d(e,"u",function(){return y}),a.d(e,"s",function(){return C}),a.d(e,"t",function(){return O}),a.d(e,"v",function(){return x});var r=a("7f80"),n=function(t){return Object(r.k)("/order/complain/status",t)},s=function(t){return Object(r.c)("/order/afterSaleReason/getByPage",t)},i=function(t){return Object(r.b)("/order/afterSaleReason/delByIds/".concat(t))},o=function(t){return Object(r.g)("/order/afterSaleReason",t)},d=function(t,e){return Object(r.k)("/order/afterSaleReason/update/".concat(t),e)},c=function(t,e){return Object(r.k)("/order/afterSale/review/".concat(t),e)},l=function(t){return Object(r.c)("/order/complain",t)},f=function(t){return Object(r.c)("/order/complain/".concat(t))},u=function(t){return Object(r.g)("/order/complain/communication",t)},v=function(t,e){return Object(r.k)("/order/complain/complete/".concat(t),e)},_=function(t){return Object(r.c)("/order/order",t)},m=function(t){return Object(r.g)("/order/order/".concat(t,"/pay"))},S=function(t){return Object(r.c)("/order/order/".concat(t))},g=function(t,e){return Object(r.k)("/order/order/update/".concat(t,"/price"),e)},p=function(t,e){return Object(r.g)("/order/order/".concat(t,"/cancel"),e)},h=function(t,e){return Object(r.g)("/order/order/update/".concat(t,"/consignee"),e)},I=function(t){return Object(r.c)("/order/afterSale/page",t)},b=function(t){return Object(r.c)("/order/afterSale/get/".concat(t))},k=function(t){return Object(r.c)("/order/afterSale/getDeliveryTraces/".concat(t))},P=function(t){return Object(r.c)("/trade/receipt",t)},y=function(t,e){return Object(r.k)("/order/afterSale/refund/".concat(t),e)},C=function(t){return Object(r.c)("/order/paymentLog",t)},O=function(t){return Object(r.c)("/order/refundLog",t)},x=function(t){return Object(r.c)("/order/afterSale/getStoreAfterSaleAddress/".concat(t))}}}]);