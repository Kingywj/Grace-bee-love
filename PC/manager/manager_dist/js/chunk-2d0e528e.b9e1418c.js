(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0e528e"],{"92fe":function(t,e,i){"use strict";function o(e,t){var i,r=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)),r}function r(r){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){var e,i;e=r,i=a[t=t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(a,t))})}return r}i.r(e);var a=i("153a"),n=i("ca72"),l=i("b735"),n={name:"privacy",components:{editor:n.a},props:{selected:{type:Boolean,default:!1}},data:function(){var i=this;return{initEditor:l.a,loading:!1,modalVisible:!1,treeDataDefault:[],list:[],treeValue:"",treeData:[],submitLoading:!1,modalTitle:"",currindex:"",form:{type:"",article:{openStatus:!1,title:"",categoryId:"",sort:1,content:"",type:""},id:""},columns:[{title:"协议名称",key:"name",width:150},{title:"协议类型",key:"type",width:150},{title:"操作",key:"action",align:"center",width:230,render:function(t,e){return t("div",[t("Button",{props:{size:"small",type:"info"},style:{marginRight:"5px"},on:{click:function(){i.edit(e.row)}}},"编辑")])}}],data:[{name:"店铺入驻协议",type:"STORE_REGISTER"},{name:"用户协议",type:"USER_AGREEMENT"},{name:"证照信息",type:"LICENSE_INFORMATION"},{name:"关于我们",type:"ABOUT"},{name:"隐私策略",type:"PRIVACY_POLICY"}]}},methods:{init:function(){this.getAllList(0)},handleCheckChange:function(t){var i="",r="";this.list=[],t.forEach(function(t,e){i+="".concat(t.value,","),r+="".concat(t.title,",")}),i=i.substring(0,i.length-1),r=r.substring(0,r.length-1),this.list.push({value:i,title:r}),this.form.article.categoryId=i},getAllList:function(t){var e=this;this.loading=!0,Object(a.d)(t).then(function(t){e.loading=!1,t.success&&(e.treeData=e.getTree(t.result),e.treeDataDefault=e.getTree(t.result),e.treeData.unshift({title:"全部",level:0,children:[],id:"0",categoryId:0}))})},getTree:function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=[];return t&&0!==t.length&&t.forEach(function(t){var e={};e.title=t.articleCategoryName,e.value=t.id,e.attr=t.articleCategoryName,e.expand=!1,e.selected=!1,e.children=i.getTree(t.children),r.push(e)}),r},edit:function(t){var e=this;this.modalType=1,this.modalTitle="编辑协议",this.form.article={content:""},this.$refs.form.resetFields(),this.loading=!0,Object(a.e)(t.type).then(function(t){e.loading=!1,e.modalVisible=!0,e.form.article.categoryId=t.result.categoryId,e.form.id=t.result.id,e.form.article.content=t.result.content,e.form.article.title=t.result.title,e.form.article.sort=t.result.sort,e.form.article.openStatus=t.result.openStatus,e.form.article.type=t.result.type,e.form.type=t.result.type}),this.loading=!1},handleSubmit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.submitLoading=!0,Object(a.l)(e.form.id,e.form.type,e.form.article).then(function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.modalVisible=!1)}))})}},mounted:function(){this.init()}},i=i("2877"),i=Object(i.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("Row",[t("Col",{attrs:{span:"24"}},[t("Card",{staticClass:"article-detail"},[t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data}})],1)],1)],1),e.selected?e._e():[t("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:1100},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form.article,"label-width":100}},[t("FormItem",{attrs:{label:"文章标题",prop:"title"}},[t("Input",{staticStyle:{width:"40%"},attrs:{clearable:""},model:{value:e.form.article.title,callback:function(t){e.$set(e.form.article,"title",t)},expression:"form.article.title"}})],1),t("FormItem",{staticClass:"form-item-view-el",attrs:{label:"文章内容",prop:"content"}},[t("editor",{ref:"editor",attrs:{openXss:"",init:r(r({},e.initEditor),{},{height:"800px"})},model:{value:e.form.article.content,callback:function(t){e.$set(e.form.article,"content",t)},expression:"form.article.content"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)]],2)},[],!1,null,null,null);e.default=i.exports}}]);