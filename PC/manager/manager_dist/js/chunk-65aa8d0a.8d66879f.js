(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-65aa8d0a","chunk-713e01b7"],{"0cee":function(t,e,r){"use strict";r.r(e);var n=r("8194"),a=r("7c93");function c(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function o(n){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){var e,r;e=n,r=a[t=t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}var i={components:{affixTime:r("c245").a},data:function(){return{columns:[{key:"createDate",title:"日期",sortable:!0},{key:"memberCount",title:"当前会员"},{key:"newlyAdded",title:"新增会员"},{key:"activeQuantity",title:"活跃会员"}],dateList:[{title:"今天",selected:!1,value:"TODAY"},{title:"昨天",selected:!1,value:"YESTERDAY"},{title:"最近7天",selected:!0,value:"LAST_SEVEN"},{title:"最近30天",selected:!1,value:"LAST_THIRTY"}],year:"",orderChart:"",params:{searchType:"LAST_SEVEN",year:"",month:"",shopId:""},data:[],enableShowMemberCount:!1}},watch:{params:{handler:function(t){this.init()},deep:!0,immediate:!0},year:function(t){this.params.year=new Date(t).getFullYear()}},methods:{initMemberChart:function(){var e=this,r=[],n=[],a=[],t=(this.data.forEach(function(t){!e.enableShowMemberCount||""==t.memberCount&&null==t.memberCount||r.push({createDate:t.createDate,memberCount:t.memberCount,title:"当前会员数量"}),e.enableShowMemberCount||""==t.newlyAdded&&null==t.newlyAdded||n.push({createDate:t.createDate,memberCount:t.newlyAdded,title:"新增会员数量"}),e.enableShowMemberCount||""==t.activeQuantity&&null==t.activeQuantity||a.push({createDate:t.createDate,memberCount:t.activeQuantity,title:"当日活跃数量"})}),[].concat(r,n,a));this.orderChart.data(t),this.orderChart.scale({activeQuantity:{range:[0,1],nice:!0}}),this.orderChart.tooltip({showCrosshairs:!0,shared:!0}),this.orderChart.line().position("createDate*memberCount").color("title").label("memberCount").shape("smooth"),this.orderChart.point().position("createDate*memberCount").color("title").label("memberCount").shape("circle").style({stroke:"#fff",lineWidth:1}),this.orderChart.area().position("createDate*memberCount").color("title").shape("smooth"),this.orderChart.render()},clickBreadcrumb:function(t,e){this.params=o({},t)},init:function(){var e=this;n.l(this.params).then(function(t){t.result&&(t.result.forEach(function(t){t.activeQuantity+=""}),e.data=t.result,e.orderChart||(e.orderChart=new a.Chart({container:"orderChart",autoFit:!0,height:500,padding:[70,70,70,70]})),e.initMemberChart())})}},mounted:function(){var t=new Date;this.year=t}},r=(r("c331"),r("2877")),r=Object(r.a)(i,function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("Affix",{attrs:{"offset-top":100}},[e("Card",{staticClass:"card fixed-bottom"},[e("affixTime",{attrs:{closeShop:!0},on:{selected:t.clickBreadcrumb}})],1)],1),e("Card",{staticClass:"card"},[e("div",[e("h4",[t._v("客户增长趋势 "),e("Button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(){t.enableShowMemberCount=!t.enableShowMemberCount,t.initMemberChart()}}},[t._v(t._s(t.enableShowMemberCount?"关闭":"显示")+"用户总人数")])],1),e("div",{attrs:{id:"orderChart"}})])]),e("Card",{staticClass:"card"},[e("div",[e("h4",[t._v("客户增长报表")]),e("Table",{staticClass:"mt_10",attrs:{stripe:"",columns:t.columns,data:t.data}})],1)])],1)},[],!1,null,"6db5ea52",null);e.default=r.exports},"3a37":function(t,e,r){},8194:function(t,e,r){"use strict";r.d(e,"k",function(){return a}),r.d(e,"h",function(){return c}),r.d(e,"c",function(){return o}),r.d(e,"u",function(){return i}),r.d(e,"i",function(){return s}),r.d(e,"g",function(){return u}),r.d(e,"t",function(){return l}),r.d(e,"a",function(){return d}),r.d(e,"o",function(){return h}),r.d(e,"p",function(){return m}),r.d(e,"q",function(){return f}),r.d(e,"w",function(){return p}),r.d(e,"v",function(){return b}),r.d(e,"l",function(){return y}),r.d(e,"n",function(){return v}),r.d(e,"r",function(){return w}),r.d(e,"j",function(){return g}),r.d(e,"e",function(){return O}),r.d(e,"f",function(){return C}),r.d(e,"s",function(){return S}),r.d(e,"b",function(){return j}),r.d(e,"d",function(){return T}),r.d(e,"m",function(){return k});var n=r("7f80"),a=function(t){return Object(n.c)("/member/evaluation/getByPage",t)},c=function(t){return Object(n.c)("/member/evaluation/get/".concat(t))},o=function(t){return Object(n.k)("/member/evaluation/delete/".concat(t))},i=function(t,e){return Object(n.c)("/member/evaluation/updateStatus/".concat(t),e)},s=function(t){return Object(n.c)("/passport/member",t)},u=function(t){return Object(n.c)("/passport/member/".concat(t))},l=function(t){return Object(n.k)("/passport/member",t)},d=function(t){return Object(n.g)("/passport/member",t)},h=function(t){return Object(n.c)("/wallet/recharge",t)},m=function(t){return Object(n.c)("/wallet/log",t)},f=function(t){return Object(n.c)("/wallet/withdrawApply",t)},p=function(t){return Object(n.g)("/wallet/withdrawApply",t)},b=function(t){return Object(n.k)("/passport/member/updateMemberStatus",t)},y=function(t){return Object(n.c)("/statistics/member",t)},v=function(t){return Object(n.c)("/statistics/view/list",t)},w=function(){return Object(n.c)("/statistics/view/online/history")},g=function(t){return Object(n.c)("/passport/member/num",t)},O=function(t){return Object(n.c)("/member/memberPointsHistory/getByPage",t)},C=function(t,e){return Object(n.c)("/member/address/".concat(t),e)},S=function(t){return Object(n.b)("/member/address/delById/".concat(t))},j=function(t){return Object(n.g)("/member/address",t)},T=function(t){return Object(n.k)("/member/address",t)},k=function(t){return Object(n.c)("/wallet/wallet",t)}},be3d:function(t,e,r){"use strict";r("3a37")},c245:function(t,e,r){"use strict";var n=r("0959");function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var r;if(t)return"string"==typeof t?c(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={props:["closeShop"],data:function(){return{month:"",selectedWay:{title:"最近7天",selected:!0,searchType:"LAST_SEVEN"},storeId:"",dates:[],params:{pageNumber:1,pageSize:10,storeName:""},dateList:[{title:"今天",selected:!1,searchType:"TODAY"},{title:"昨天",selected:!1,searchType:"YESTERDAY"},{title:"最近7天",selected:!0,searchType:"LAST_SEVEN"},{title:"最近30天",selected:!1,searchType:"LAST_THIRTY"}],shopTotal:"",shopsData:[]}},mounted:function(){this.getFiveYears(),this.getShopList()},methods:{handleReachBottom:function(){var t=this;setTimeout(function(){t.params.pageNumber*t.params.pageSize<=t.shopTotal&&(t.params.pageNumber++,t.getShopList())},1500)},getShopList:function(){var r=this;Object(n.h)(this.params).then(function(t){var e;t.success&&(r.shopTotal=t.result.total,(e=r.shopsData).push.apply(e,a(t.result.records)))})},changeshop:function(t){this.selectedWay.storeId=this.storeId,this.$emit("selected",this.selectedWay)},getFiveYears:function(){for(var t=(new Date).getFullYear(),e=t-5,r=(new Date).getMonth()+1,n=[],a=e;a<=t;a++)for(var c=1;c<=12;c++)a==t&&r<c||n.push({year:a,month:c});this.dates=n.reverse()},changeSelect:function(){this.month&&(this.dateList.forEach(function(t){t.selected=!1}),this.selectedWay.year=this.month.split("-")[0],this.selectedWay.month=this.month.split("-")[1],this.selectedWay.searchType="",this.$emit("selected",this.selectedWay))},clickBreadcrumb:function(e){this.dateList.forEach(function(t){t.selected=!1}),e.selected=!0,e.storeId=this.storeId,(this.month="")==e.searchType&&(dateList.some(function(t){return t.title==e.title})?e.searchType=date.searchType:e.searchType="LAST_SEVEN"),this.selectedWay=e,this.selectedWay.year=(new Date).getFullYear(),this.selectedWay.month="",this.$emit("selected",this.selectedWay)}}},r=(r("be3d"),r("2877")),r=Object(r.a)(o,function(){var n=this,a=n._self._c;return a("div",[a("div",{staticClass:"breadcrumb"},[n._l(n.dateList,function(e,r){return a("span",{key:r,class:{active:e.selected},on:{click:function(t){return n.clickBreadcrumb(e,r)}}},[n._v(" "+n._s(e.title))])}),a("div",{staticClass:"date-picker"},[a("Select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"年月查询",clearable:""},on:{"on-change":function(t){return n.changeSelect(n.selectedWay)}},model:{value:n.month,callback:function(t){n.month=t},expression:"month"}},n._l(n.dates,function(t,e){return a("Option",{key:e,attrs:{value:t.year+"-"+t.month,clearable:""}},[n._v(" "+n._s(t.year+"年"+t.month+"月"))])}),1)],1),n.closeShop?n._e():a("div",{staticClass:"shop-list"},[a("Select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{clearable:"",placeholder:"店铺查询"},on:{"on-change":function(t){return n.changeshop(n.selectedWay)}},model:{value:n.storeId,callback:function(t){n.storeId=t},expression:"storeId"}},[a("Scroll",{attrs:{"on-reach-bottom":n.handleReachBottom}},n._l(n.shopsData,function(t,e){return a("Option",{key:e,attrs:{value:t.id}},[n._v(n._s(t.storeName))])}),1)],1)],1)],2)])},[],!1,null,"03cc32a5",null);e.a=r.exports},c331:function(t,e,r){"use strict";r("f310")},f310:function(t,e,r){}}]);