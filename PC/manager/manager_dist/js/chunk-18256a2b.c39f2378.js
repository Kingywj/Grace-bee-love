(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-18256a2b"],{a00a:function(t,e,i){"use strict";i.r(e);var s=i("365c"),a=i("e1bd"),n=i("be65"),r=i.n(n),o=i("c276"),n={components:{uploadPicThumb:a.a},name:"personal-enter",data:function(){return{activeName:"基本信息",userForm:{avatar:"",nickname:""},saveLoading:!1,currMenu:"基本信息"}},methods:{init:function(){var t,e=JSON.parse(r.a.get("userInfoManager"));for(t in e)null==e[t]&&(e[t]="");var i=JSON.parse(JSON.stringify(e));this.userForm=i},changePassword:function(){o.a.openNewPage(this,"change-password"),this.$router.push({name:"change_password"})},changeMenu:function(t){this.currMenu=t},saveEdit:function(){var e=this,t=(this.saveLoading=!0,this.userForm);Object(s.pb)(t).then(function(t){e.saveLoading=!1,t.success&&(e.$Message.success("保存成功"),r.a.set("userInfoManager",e.userForm),e.$store.commit("setAvatarPath",e.userForm.avatar),setTimeout(function(){e.$router.go(0)},500))})}},mounted:function(){this.init()}},a=(i("bc28"),i("2877")),i=Object(a.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"own-space"},[t("Card",{staticClass:"own-space-new"},[t("div",{staticClass:"own-wrap"},[t("div",{staticStyle:{width:"240px"}},[t("Menu",{attrs:{"active-name":e.activeName,theme:"light"},on:{"on-select":e.changeMenu}},[t("MenuItem",{attrs:{name:"基本信息"}},[e._v("基本信息")]),t("MenuItem",{attrs:{name:"安全设置"}},[e._v("安全设置")])],1)],1),t("div",{staticStyle:{padding:"8px 40px",width:"100%"}},[t("div",{staticClass:"title"},[e._v(e._s(e.currMenu))]),t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:"基本信息"==e.currMenu,expression:"currMenu=='基本信息'"}]},[t("Form",{ref:"userForm",attrs:{model:e.userForm,"label-width":90,"label-position":"left"}},[t("FormItem",{attrs:{label:"用户头像："}},[t("upload-pic-thumb",{attrs:{multiple:!1},model:{value:e.userForm.avatar,callback:function(t){e.$set(e.userForm,"avatar",t)},expression:"userForm.avatar"}})],1),t("FormItem",{attrs:{label:"用户名："}},[e._v(" "+e._s(e.userForm.username)+" ")]),t("FormItem",{attrs:{label:"昵称：",prop:"nickName"}},[t("Input",{staticStyle:{width:"250px"},attrs:{maxlength:"20"},model:{value:e.userForm.nickName,callback:function(t){e.$set(e.userForm,"nickName",t)},expression:"userForm.nickName"}})],1),t("FormItem",[t("Button",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveEdit}},[e._v("保存 ")])],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"安全设置"==e.currMenu,expression:"currMenu=='安全设置'"}],staticClass:"safe"},[t("div",{staticClass:"item"},[t("div",[t("div",{staticClass:"title"},[e._v("账户密码")])]),t("div",[t("a",{on:{click:e.changePassword}},[e._v("修改")])])])])])])])])],1)},[],!1,null,"3c6fbc42",null);e.default=i.exports},bc28:function(t,e,i){"use strict";i("cced")},c6072:function(t,e,i){},cced:function(t,e,i){},e0fa:function(t,e,i){"use strict";i("c6072")},e1bd:function(t,e,i){"use strict";var s=i("365c"),a=i("b76a");function n(e,t){var i,s=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)),s}function r(s){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){var e,i;e=s,i=a[t=t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(a,t))})}return s}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a={name:"uploadPicThumb",components:{vuedraggable:i.n(a).a},props:{value:{type:null},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},limit:{type:Number,default:10}},data:function(){return{accessToken:{},uploadFileUrl:s.nb,uploadList:[],viewImage:!1,imgUrl:""}},methods:{onEnd:function(){this.returnValue()},init:function(){this.setData(this.value,!0),this.accessToken={accessToken:this.getStore("accessToken")}},handleView:function(t){this.imgUrl=t,this.viewImage=!0},handleRemove:function(e){this.uploadList=this.uploadList.filter(function(t){return t.url!==e.url}),this.returnValue()},handleSuccess:function(t,e){t.success?(e.url=t.result,!this.multiple&&0<this.uploadList.length&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError:function(t,e,i){this.$Message.error(t.toString())},handleFormatError:function(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 .jpg .jpeg .png .gif图片格式文件"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件大小过大，不能超过1M."})},handleBeforeUpload:function(){return!(this.multiple&&this.uploadList.length>=this.limit&&(this.$Message.warning("最多只能上传"+this.limit+"张图片"),1))},returnValue:function(){var e,t;!this.uploadList||this.uploadList.length<1?this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change","")):this.multiple?(e=[],this.uploadList.forEach(function(t){e.push(t.url)}),this.$emit("input",e),this.$emit("on-change",e)):(t=this.uploadList[0].url,this.$emit("input",t),this.$emit("on-change",t))},setData:function(t,e){var i=this;if("string"==typeof t)this.multiple?this.$Message.warning("多张上传仅支持数组数据类型"):t&&(this.uploadList=[],this.uploadList.push({url:t,status:"finished"}),this.$emit("uploadchange",t),this.$emit("on-change",t));else if("object"==o(t))if(this.multiple)if(this.uploadList=[],t.length>this.limit){for(var s=0;s<this.limit;s++){var a={url:t[s],status:"finished"};this.uploadList.push(a)}this.$emit("on-change",t.slice(0,this.limit)),e&&this.$emit("input",t.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else t.forEach(function(t){t=r({status:"finished"},t);i.uploadList.push(t)}),this.$emit("on-change",t);else this.$Message.warning("单张上传仅支持字符串数据类型")}},watch:{value:function(t){this.setData(t)}},mounted:function(){this.init()}},i("e0fa"),i=i("2877"),i=Object(i.a)(a,function(){var i=this,s=i._self._c;return s("div",[s("div",{staticClass:"upload-pic-thumb"},[s("vuedraggable",{staticClass:"list-group",attrs:{list:i.uploadList,disabled:!i.draggable||!i.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:i.onEnd}},i._l(i.uploadList,function(e,t){return s("div",{key:t,staticClass:"upload-list"},["finished"==e.status?s("div",{staticStyle:{height:"60px"}},[s("img",{attrs:{src:e.url}}),s("div",{staticClass:"upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(t){return i.handleView(e.url)}}}),s("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(t){return i.handleRemove(e)}}})],1)]):s("div",[e.showProgress?s("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):i._e()],1)])}),0),s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{multiple:i.multiple,"show-upload-list":!1,"on-success":i.handleSuccess,"on-error":i.handleError,format:["jpg","jpeg","png","gif"],"max-size":1024,"on-format-error":i.handleFormatError,"on-exceeded-size":i.handleMaxSize,"before-upload":i.handleBeforeUpload,type:"drag",action:i.uploadFileUrl,headers:i.accessToken}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("Icon",{attrs:{type:"md-camera",size:"20"}})],1)])],1),s("Modal",{attrs:{title:"图片预览",styles:{top:"30px"},draggable:""},model:{value:i.viewImage,callback:function(t){i.viewImage=t},expression:"viewImage"}},[s("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:i.imgUrl,alt:"无效的图片链接"}}),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){i.viewImage=!1}}},[i._v("关闭")])],1)])],1)},[],!1,null,"63ca8744",null);e.a=i.exports}}]);