(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-164bb718"],{"0ec0":function(e,t,a){"use strict";a("39f1")},1105:function(e,t,a){"use strict";a.r(t);var s=a("bb7b"),o=a("cdbd"),n=a("c40e"),i=a("0959"),r=a("da7e"),l=a("6bba"),c=a("5945"),r={name:"shop-operation",components:{uploadPicInput:r.a,ossManage:o.default,region:l.a,memberLayout:s.default,liliMap:c.a},data:function(){return{shopId:this.$route.query.shopId,isRead:!1,selectedFormBtnName:"",loading:!1,auditModel:!1,auditModalLoading:!1,picModalFlag:!1,address:"",returnAddress:"",memberModalFlag:!1,settlementShow:!1,addSettlementConfirmBtn:!1,addSettlementBtn:!0,day:1,tabName:"base",tabNameList:["base","entry","category","settlement"],shopValidate:{memberName:[{required:!0,message:"会员不能为空"}],storeName:[{required:!0,message:"店铺名称不能为空"}],companyAddress:[{required:!0,message:"公司地址不能为空"}],storeAddressDetail:[{required:!0,message:"店铺详细地址不能为空"}],storeDesc:[{required:!0,message:"店铺简介不能为空"}],storeCenter:[{required:!0,message:"店铺未定位"}],companyName:[{required:!0,message:"公司名称不能为空"}],companyPhone:[{required:!0,message:"公司电话不能为空"}],employeeNum:[{required:!0,type:"number",message:"员工总数不能为空",trigger:"blur"}],companyAddressIdPath:[{required:!0,message:"请选择公司地址"}],registeredCapital:[{required:!0,type:"number",message:"注册资金不能为空",trigger:"blur"}],linkName:[{required:!0,message:"联系人姓名不能为空"}],linkPhone:[{required:!0,message:"联系人手机号不能为空"},{type:"string",pattern:/^1[3|4|5|6|7|8][0-9]{9}$/,message:"手机号格式出错",trigger:"blur"}],companyEmail:[{required:!0,message:"邮箱不能为空"},{type:"email",message:"邮箱格式错误"}],licenseNum:[{required:!0,message:"营业执照号不能为空"}],scope:[{required:!0,message:"法定经营范围不能为空"}],legalName:[{required:!0,message:"法人姓名不能为空"}],legalId:[{required:!0,message:"法人证件号不能为空"}],settlementBankAccountName:[{required:!0,message:"银行开户名不能为空"}],settlementBankAccountNum:[{required:!0,message:"银行账号不能为空"}],settlementBankBranchName:[{required:!0,message:"银行支行名称不能为空"}],settlementBankJointName:[{required:!0,message:"支行联行号不能为空"}],salesConsigneeMobile:[{type:"string",pattern:/^1[3|4|5|6|7|8][0-9]{9}$/,message:"手机号格式出错",trigger:"blur"}]},indeterminate:!0,checkAll:!1,checkAllGroup:[],submitLoading:!1,settlementCycle:[],shopForm:{settlementCycle:"",selfOperated:"false",memberName:"",companyName:"",addressPath:"",addressIdPath:"",companyAddressPath:"",companyAddressIdPath:"",companyAddress:"",companyEmail:"",employeeNum:1,registeredCapital:1,linkName:"",linkPhone:"",licenseNum:"",scope:"",licencePhoto:"",legalName:"",legalId:"",legalPhoto:["",""],companyPhone:"",settlementBankAccountName:"",settlementBankAccountNum:"",settlementBankBranchName:"",settlementBankJointName:"",businesses:"",storeName:"",storeLogo:"",storeDesc:"",ddCode:""},categories:[],infoResult:{},picIndex:""}},methods:{callbackMember:function(t){var a=this;t&&Object(i.e)(t.id).then(function(e){e.success&&(null!=e.result?a.$Message.error("当前会员已经拥有店铺"):(a.shopForm.memberId=t.id,a.shopForm.memberName=t.username),a.memberModalFlag=!1)})},selectMember:function(){this.$refs.memberLayout.selectedMember=!0,this.memberModalFlag=!0},regionClick:function(){this.showRegion=!0,this.regionId=""},removesettlementCycle:function(e,t){this.settlementCycle=this.settlementCycle.filter(function(e){return e!==t})},addsettlementCycle:function(){this.settlementShow=!0,this.addSettlementConfirmBtn=!0,this.addSettlementBtn=!1},addsettlementCycleConfirm:function(){this.day?this.settlementCycle.includes(this.day)?this.$Message.warning("已有该结算周期，不能重复输入"):(this.settlementCycle.push(this.day),this.addSettlementConfirmBtn=!1,this.addSettlementBtn=!0,this.settlementShow=!1,this.day=1):this.$Message.warning("请输入正确的结算周期，1-31的整数")},selectedRegion:function(e){this.$set(this.shopForm,"companyAddressIdPath",e[0].toString()),this.$set(this.shopForm,"companyAddressPath",e[1].toString().replace(/\s/g,""))},selectedConsigneeRegion:function(e){this.$set(this.shopForm,"salesConsigneeAddressId",e[0].toString()),this.$set(this.shopForm,"salesConsigneeAddressPath",e[1].toString().replace(/\s/g,""))},handleCLickImg:function(e,t){this.$refs.ossManage.selectImage=!0,this.picModalFlag=!0,this.selectedFormBtnName=e,this.picIndex=t},callbackSelected:function(e){this.picModalFlag=!1,0===this.picIndex||1===this.picIndex?this.shopForm[this.selectedFormBtnName][this.picIndex]=e.url:this.shopForm[this.selectedFormBtnName]=e.url,this.picIndex=""},init:function(){this.getCategories(),this.shopId&&this.getShopDetail()},next:function(){var e=this.tabNameList.indexOf(this.tabName)+1;this.tabName=this.tabNameList[e]},prev:function(){var e=this.tabNameList.indexOf(this.tabName)-1;this.tabName=this.tabNameList[e]},formValidate:function(e,t,a){},getShopDetail:function(){var t=this;Object(i.m)(this.shopId).then(function(e){e.success&&(t.infoResult=e.result,t.shopForm=e.result,t.shopForm.selfOperated?t.shopForm.selfOperated="true":t.shopForm.selfOperated="false",t.checkAllGroup=t.shopForm.goodsManagementCategory.split(","),t.shopForm.settlementCycle&&(t.settlementCycle=t.shopForm.settlementCycle.split(",")),t.shopForm.legalPhoto=t.shopForm.legalPhoto.split(","),t.address=t.shopForm.companyAddressIdPath,t.returnAddress=t.shopForm.salesConsigneeAddressId)})},save:function(){var t=this;this.$refs.shopForm.validate(function(e){t.settlementShow?t.$Message.error("请确认当前所填结算日信息"):""==t.checkAllGroup?(t.$Message.error("请选择店铺经营类目"),t.tabName="cagetory"):e&&((e=JSON.parse(JSON.stringify(t.shopForm))).goodsManagementCategory=t.checkAllGroup,e.settlementCycle=t.settlementCycle,t.shopId?(delete e.memberId,Object(i.n)(t.shopId,e).then(function(e){e.success&&(t.$Message.success("编辑成功"),t.$router.push({name:"shopList"}))})):""==e.memberName?t.$Message.error("请选择开店的会员"):Object(i.k)(e).then(function(e){e.success&&(t.$Message.success("添加成功"),t.shopForm={},t.$router.push({name:"shopList"}))}))})},getAddress:function(e){this.shopForm.storeCenter=e.position.lng+","+e.position.lat,this.$set(this.shopForm,"storeAddressPath",e.addr),this.$set(this.shopForm,"storeAddressIdPath",e.addrId)},handleCheckAll:function(){var t;this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?(t=[],this.categories.forEach(function(e){return t.push(e.id)}),this.checkAllGroup=t):this.checkAllGroup=[]},checkAllGroupChange:function(e){e.length===this.categories.length?(this.indeterminate=!1,this.checkAll=!0):(0<e.length?this.indeterminate=!0:this.indeterminate=!1,this.checkAll=!1)},getCategories:function(){var t=this;Object(n.o)().then(function(e){e.success&&(t.categories=e.result)})},auditHandler:function(){this.auditModel=!0},audit:function(e){var t=this,a=this.$route.query.shopId;"PASS"===e?Object(i.l)(a,0).then(function(e){t.auditModel=!1,e.success&&(t.$Message.success("操作成功"),t.$router.push({name:"shopAuth"}))}):Object(i.l)(a,1).then(function(e){t.auditModel=!1,e.success&&(t.$Message.success("操作成功"),t.$router.push({name:"shopAuth"}))})}},created:function(){this.init()}},o=(a("0ec0"),a("2877")),l=Object(o.a)(r,function(){var a=this,s=a._self._c;return s("div",[s("Card",["APPLYING"===a.shopForm.storeDisable?s("Button",{staticClass:"mb_10",attrs:{type:"primary"},on:{click:a.auditHandler}},[a._v("审核")]):a._e(),s("Tabs",{staticStyle:{overflow:"visible"},attrs:{animated:!1},model:{value:a.tabName,callback:function(e){a.tabName=e},expression:"tabName"}},[s("Form",{ref:"shopForm",attrs:{model:a.shopForm,"label-width":130,"label-position":"right",rules:a.shopValidate},on:{"on-validate":a.formValidate}},[s("TabPane",{staticClass:"tab",attrs:{label:"基本信息",name:"base"}},[s("Divider",{attrs:{orientation:"left"}},[a._v("基本信息")]),a.isRead?s("div",{staticClass:"mask"},[a._v("只读不可修改")]):a._e(),s("div",[s("FormItem",{attrs:{label:"会员名称",prop:"memberName"}},[s("div",{staticClass:"item"},[s("Input",{attrs:{disabled:""},model:{value:a.shopForm.memberName,callback:function(e){a.$set(a.shopForm,"memberName",e)},expression:"shopForm.memberName"}}),a.$route.query.shopId?a._e():s("Button",{on:{click:function(e){return a.selectMember()}}},[a._v("选择会员")])],1)]),s("FormItem",{attrs:{label:"店铺名称",prop:"storeName"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.storeName,callback:function(e){a.$set(a.shopForm,"storeName",e)},expression:"shopForm.storeName"}})],1),s("FormItem",{attrs:{label:"是否自营",prop:"selfOperated"}},[s("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:a.shopForm.selfOperated,callback:function(e){a.$set(a.shopForm,"selfOperated",e)},expression:"shopForm.selfOperated"}},[s("Radio",{attrs:{label:"true"}},[a._v("自营")]),s("Radio",{attrs:{label:"false"}},[a._v("非自营")])],1)],1),s("FormItem",{attrs:{label:"店铺定位",prop:"shopCenter"}},[a.shopForm.storeCenter?s("Button",{attrs:{type:"success"},on:{click:function(e){a.$refs.liliMap.showMap=!0}}},[a._v("已定位")]):s("Button",{attrs:{type:"info"},on:{click:function(e){a.$refs.liliMap.showMap=!0}}},[a._v("点击获取店铺定位")])],1),s("FormItem",{attrs:{label:"店铺所在地",prop:"storeAddressPath"}},[s("Input",{staticStyle:{width:"350px"},attrs:{disabled:""},model:{value:a.shopForm.storeAddressPath,callback:function(e){a.$set(a.shopForm,"storeAddressPath",e)},expression:"shopForm.storeAddressPath"}})],1),s("FormItem",{attrs:{label:"店铺详细地址",prop:"storeAddressDetail"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.storeAddressDetail,callback:function(e){a.$set(a.shopForm,"storeAddressDetail",e)},expression:"shopForm.storeAddressDetail"}})],1),s("FormItem",{staticClass:"storeLogo",attrs:{label:"店铺logo"}},[a.shopForm.storeLogo?s("Avatar",{staticStyle:{height:"100px",width:"100px"},attrs:{shape:"square",icon:"ios-person",size:"default",src:a.shopForm.storeLogo}}):a._e(),s("div",[s("Button",{attrs:{type:"primary"},on:{click:function(e){return a.handleCLickImg("storeLogo")}}},[a._v("选择图片")])],1)],1),s("FormItem",{staticStyle:{width:"350px"},attrs:{label:"店铺简介",prop:"storeDesc"}},[s("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:4,maxlength:"200","show-word-limit":"",clearable:""},model:{value:a.shopForm.storeDesc,callback:function(e){a.$set(a.shopForm,"storeDesc",e)},expression:"shopForm.storeDesc"}})],1),s("br"),s("Divider",{attrs:{orientation:"left"}},[a._v("退货收件地址")]),s("FormItem",{attrs:{label:"收件人姓名"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.salesConsigneeName,callback:function(e){a.$set(a.shopForm,"salesConsigneeName",e)},expression:"shopForm.salesConsigneeName"}})],1),s("FormItem",{attrs:{label:"收件人手机"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:"",maxlength:"11"},model:{value:a.shopForm.salesConsigneeMobile,callback:function(e){a.$set(a.shopForm,"salesConsigneeMobile",e)},expression:"shopForm.salesConsigneeMobile"}})],1),s("FormItem",{attrs:{label:"地址信息"}},[s("region",{staticStyle:{width:"350px"},attrs:{addressId:a.returnAddress},on:{selected:a.selectedConsigneeRegion}})],1),s("FormItem",{attrs:{label:"详细地址"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.salesConsigneeDetail,callback:function(e){a.$set(a.shopForm,"salesConsigneeDetail",e)},expression:"shopForm.salesConsigneeDetail"}})],1)],1)],1),s("TabPane",{staticClass:"tab",attrs:{label:"入驻信息",name:"entry"}},[a.isRead?s("div",{staticClass:"mask"},[a._v("只读不可修改")]):a._e(),s("Divider",{attrs:{orientation:"left"}},[a._v("公司信息")]),s("div",[s("FormItem",{attrs:{label:"公司名称",prop:"companyName"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.companyName,callback:function(e){a.$set(a.shopForm,"companyName",e)},expression:"shopForm.companyName"}})],1),s("FormItem",{attrs:{label:"公司电话",prop:"companyPhone"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.companyPhone,callback:function(e){a.$set(a.shopForm,"companyPhone",e)},expression:"shopForm.companyPhone"}})],1),s("FormItem",{attrs:{label:"公司所在地",prop:"companyAddressIdPath"}},[s("region",{staticStyle:{width:"350px"},attrs:{addressId:a.address},on:{selected:a.selectedRegion}})],1),s("FormItem",{attrs:{label:"公司详细地址",prop:"companyAddress"}},[s("Input",{staticStyle:{width:"350px"},attrs:{clearable:""},model:{value:a.shopForm.companyAddress,callback:function(e){a.$set(a.shopForm,"companyAddress",e)},expression:"shopForm.companyAddress"}})],1),s("FormItem",{attrs:{label:"员工总数",prop:"employeeNum"}},[s("InputNumber",{staticStyle:{width:"150px"},attrs:{min:1,max:9999999},model:{value:a.shopForm.employeeNum,callback:function(e){a.$set(a.shopForm,"employeeNum",e)},expression:"shopForm.employeeNum"}})],1),s("FormItem",{attrs:{label:"注册资金",prop:"registeredCapital"}},[s("InputNumber",{staticStyle:{width:"150px"},attrs:{min:1,max:9999999},model:{value:a.shopForm.registeredCapital,callback:function(e){a.$set(a.shopForm,"registeredCapital",e)},expression:"shopForm.registeredCapital"}}),s("span",{staticStyle:{"margin-left":"10px"}},[a._v("万")])],1),s("FormItem",{attrs:{label:"联系人姓名",prop:"linkName"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.linkName,callback:function(e){a.$set(a.shopForm,"linkName",e)},expression:"shopForm.linkName"}})],1),s("FormItem",{attrs:{label:"联系人手机",prop:"linkPhone"}},[s("Input",{staticStyle:{width:"200px"},attrs:{maxlength:"11",clearable:""},model:{value:a.shopForm.linkPhone,callback:function(e){a.$set(a.shopForm,"linkPhone",e)},expression:"shopForm.linkPhone"}})],1),s("FormItem",{attrs:{label:"电子邮箱",prop:"companyEmail"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.companyEmail,callback:function(e){a.$set(a.shopForm,"companyEmail",e)},expression:"shopForm.companyEmail"}})],1),s("Divider",{attrs:{orientation:"left"}},[a._v("营业执照信息")]),s("FormItem",{attrs:{label:"营业执照号",prop:"licenseNum"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.licenseNum,callback:function(e){a.$set(a.shopForm,"licenseNum",e)},expression:"shopForm.licenseNum"}})],1),s("FormItem",{attrs:{label:"法定经营范围",prop:"scope"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.scope,callback:function(e){a.$set(a.shopForm,"scope",e)},expression:"shopForm.scope"}})],1),s("Divider",{attrs:{orientation:"left"}},[a._v("法人信息")]),s("FormItem",{attrs:{label:"法人姓名",prop:"legalName"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.legalName,callback:function(e){a.$set(a.shopForm,"legalName",e)},expression:"shopForm.legalName"}})],1),s("FormItem",{attrs:{label:"法人证件号",prop:"legalId"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.legalId,callback:function(e){a.$set(a.shopForm,"legalId",e)},expression:"shopForm.legalId"}})],1),s("FormItem",{attrs:{label:"法人身份证照片",prop:"legalPhoto"}},[s("Avatar",{staticClass:"legal-photo",attrs:{shape:"square",size:"100",icon:"md-add",src:a.shopForm.legalPhoto[0]},nativeOn:{click:function(e){return a.handleCLickImg("legalPhoto",0)}}}),s("Avatar",{staticClass:"ml_10 legal-photo",attrs:{shape:"square",size:"100",icon:"md-add",src:a.shopForm.legalPhoto[1]},nativeOn:{click:function(e){return a.handleCLickImg("legalPhoto",1)}}}),s("span",[a._v("点击图片上传身份证正反面，要求身份证清晰，四角无缺漏")])],1),s("Divider",{attrs:{orientation:"left"}},[a._v("结算银行信息")]),s("FormItem",{attrs:{label:"银行开户名",prop:"settlementBankAccountName"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.settlementBankAccountName,callback:function(e){a.$set(a.shopForm,"settlementBankAccountName",e)},expression:"shopForm.settlementBankAccountName"}})],1),s("FormItem",{attrs:{label:"银行账号",prop:"settlementBankAccountNum"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.settlementBankAccountNum,callback:function(e){a.$set(a.shopForm,"settlementBankAccountNum",e)},expression:"shopForm.settlementBankAccountNum"}})],1),s("FormItem",{attrs:{label:"银行支行名称",prop:"settlementBankBranchName"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.settlementBankBranchName,callback:function(e){a.$set(a.shopForm,"settlementBankBranchName",e)},expression:"shopForm.settlementBankBranchName"}})],1),s("FormItem",{attrs:{label:"支行联行号",prop:"settlementBankJointName"}},[s("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:a.shopForm.settlementBankJointName,callback:function(e){a.$set(a.shopForm,"settlementBankJointName",e)},expression:"shopForm.settlementBankJointName"}})],1),s("FormItem",{attrs:{label:"许可证电子版"}},[a.shopForm.licencePhoto?s("Avatar",{staticStyle:{height:"100px",width:"100px"},attrs:{shape:"square",icon:"ios-person",size:"default",src:a.shopForm.licencePhoto}}):a._e(),s("div",[s("Button",{attrs:{type:"primary"},on:{click:function(e){return a.handleCLickImg("licencePhoto")}}},[a._v("选择图片")])],1)],1),a.loading?s("Spin",{attrs:{fix:""}}):a._e()],1)],1),s("TabPane",{staticClass:"tab",attrs:{label:"经营范围",name:"category"}},[a.isRead?s("div",{staticClass:"mask"},[a._v("只读不可修改")]):a._e(),s("FormItem",{attrs:{label:"经营类目",prop:"goodsManagementCategory"}},[s("div",[s("Checkbox",{attrs:{indeterminate:a.indeterminate,value:a.checkAll},nativeOn:{click:function(e){return e.preventDefault(),a.handleCheckAll.apply(null,arguments)}}},[a._v("全选 ")])],1),s("CheckboxGroup",{on:{"on-change":a.checkAllGroupChange},model:{value:a.checkAllGroup,callback:function(e){a.checkAllGroup=e},expression:"checkAllGroup"}},a._l(a.categories,function(e,t){return s("Checkbox",{key:t+1,attrs:{label:e.id}},[a._v(a._s(e.name)+" ")])}),1)],1)],1),s("TabPane",{staticClass:"tab",attrs:{label:"结算信息",name:"settlement"}},[s("Alert",{attrs:{type:"error"}},[a._v("已添加"),s("span",{staticClass:"theme_color"},[a._v(a._s(a.settlementCycle.length))]),a._v("个结算日，最多可添加5个结算日，当月不包含所设日期时，将会顺延到下一个结算日")]),s("FormItem",{attrs:{label:"结算日期"}},[a._l(a.settlementCycle,function(e){return s("Tag",{key:e,staticStyle:{"marrgin-left":"10px"},attrs:{name:e,closable:""},on:{"on-close":a.removesettlementCycle}},[a._v(a._s(e)+" ")])}),s("InputNumber",{directives:[{name:"show",rawName:"v-show",value:a.settlementShow,expression:"settlementShow"}],attrs:{size:"small",max:31,min:1},model:{value:a.day,callback:function(e){a.day=e},expression:"day"}}),a.addSettlementBtn&&a.settlementCycle.length<5?s("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"default",size:"small"},on:{click:a.addsettlementCycle}},[a._v("添加结算日期 ")]):a._e(),a.addSettlementConfirmBtn?s("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"default",size:"small"},on:{click:a.addsettlementCycleConfirm}},[a._v("确认 ")]):a._e()],2)],1)],1)],1),s("div",{attrs:{align:"center"}},[s("Button",{directives:[{name:"show",rawName:"v-show",value:0<a.tabNameList.indexOf(a.tabName),expression:"tabNameList.indexOf(tabName) > 0"}],staticClass:"mr_10",attrs:{type:"info"},on:{click:a.prev}},[a._v("上一步")]),s("Button",{directives:[{name:"show",rawName:"v-show",value:a.tabNameList.indexOf(a.tabName)<a.tabNameList.length-1,expression:"tabNameList.indexOf(tabName) < tabNameList.length - 1"}],attrs:{type:"primary"},on:{click:a.next}},[a._v("下一步")]),a.isRead?a._e():s("Button",{directives:[{name:"show",rawName:"v-show",value:a.tabNameList.indexOf(a.tabName)===a.tabNameList.length-1,expression:"tabNameList.indexOf(tabName) === tabNameList.length - 1"}],attrs:{type:"primary"},on:{click:a.save}},[a._v(" "+a._s(a.shopId?"修改":"保存")+" ")])],1)],1),s("liliMap",{ref:"liliMap",on:{getAddress:a.getAddress}}),s("Modal",{attrs:{width:"1200px"},model:{value:a.picModalFlag,callback:function(e){a.picModalFlag=e},expression:"picModalFlag"}},[s("ossManage",{ref:"ossManage",on:{callback:a.callbackSelected}})],1),s("Modal",{attrs:{width:"1200px"},model:{value:a.memberModalFlag,callback:function(e){a.memberModalFlag=e},expression:"memberModalFlag"}},[s("memberLayout",{ref:"memberLayout",staticClass:"selectedMember",on:{callback:a.callbackMember}})],1),s("Modal",{attrs:{width:"360"},model:{value:a.auditModel,callback:function(e){a.auditModel=e},expression:"auditModel"}},[s("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[s("Icon",{attrs:{type:"ios-information-circle"}}),s("span",[a._v("审核店铺")])],1),s("div",{staticStyle:{"text-align":"center"}},[s("p",[a._v("您确认要审核通过该店铺")])]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"error",loading:a.auditModalLoading},on:{click:function(e){return a.audit("REFUSED")}}},[a._v("驳回")]),s("Button",{attrs:{type:"info",loading:a.auditModalLoading},on:{click:function(e){return a.audit("PASS")}}},[a._v("通过")])],1)])],1)},[],!1,null,"4bafacca",null);t.default=l.exports},"2d45":function(e,t,a){},"39f1":function(e,t,a){},"51e5":function(e,t,a){},5945:function(e,t,a){"use strict";var s=a("862d"),o=a.n(s),n=a("2934"),i=a("f121"),s={data:function(){return{config:i,showMap:!1,mapSearch:"",map:null,autoComplete:null,geocoder:null,positionPicker:null,tips:[],addrContent:{},loading:!1}},watch:{mapSearch:function(e){this.searchOfMap(e)}},methods:{ok:function(){var t=this,e=(this.loading=!0,{cityCode:this.addrContent.regeocode.addressComponent.citycode,townName:this.addrContent.regeocode.addressComponent.township});Object(n.c)(e).then(function(e){e.success&&(t.addrContent.addr=e.result.name.replace(/,/g," "),t.addrContent.addrId=e.result.id,t.loading=!1,t.showMap=!1,t.$emit("getAddress",t.addrContent))})},init:function(){var s=this;o.a.load({key:this.config.aMapKey,version:"",plugins:["AMap.ToolBar","AMap.Autocomplete","AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder"],AMapUI:{version:"1.1",plugins:["misc/PositionPicker"]}}).then(function(e){var t=s,a=(s.map=new e.Map("map-container",{zoom:12}),t.map.addControl(new e.ToolBar),t.map.addControl(new e.Autocomplete),t.map.addControl(new e.PlaceSearch),t.map.addControl(new e.Geocoder),{city:"全国"});t.autoComplete=new e.Autocomplete(a),t.geocoder=new e.Geocoder(a),t.positionPicker=new AMapUI.PositionPicker({mode:"dragMap",map:t.map}),t.positionPicker.start(),t.positionPicker.on("success",function(e){t.addrContent=e})}).catch(function(e){})},searchOfMap:function(e){var a=this;this.autoComplete.search(e,function(e,t){"complete"==e&&"OK"==t.info?a.tips=t.tips:a.tips=[]})},selectAddr:function(e){if(!e)return this.$Message.warning("请选择正确点位"),!1;e=[e.lng,e.lat];this.positionPicker.start(e)}},mounted:function(){this.init()}},a=(a("cbe1"),a("2877")),a=Object(a.a)(s,function(){var a=this,s=a._self._c;return s("div",{staticClass:"map"},[s("Modal",{attrs:{title:"选择地址",width:"800"},model:{value:a.showMap,callback:function(e){a.showMap=e},expression:"showMap"}},[s("div",{staticClass:"address"},[a._v(a._s(a.addrContent.address))]),s("div",{attrs:{id:"map-container"}}),s("div",{staticClass:"search-con"},[s("Input",{attrs:{placeholder:"输入关键字搜索",id:"input-map"},model:{value:a.mapSearch,callback:function(e){a.mapSearch=e},expression:"mapSearch"}}),s("ul",a._l(a.tips,function(t,e){return s("li",{key:e,on:{click:function(e){return a.selectAddr(t.location)}}},[s("p",[a._v(a._s(t.name))]),s("p",[a._v(a._s(t.district+t.address))])])}),0)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"default"},on:{click:function(e){a.showMap=!1}}},[a._v("取消")]),s("Button",{attrs:{type:"primary",loading:a.loading},on:{click:a.ok}},[a._v("确定")])],1)])],1)},[],!1,null,"8e0656f2",null);t.a=a.exports},"862d":function(e,t,a){"use strict";e.exports=function(){function r(e){var t=[];return e.AMapUI&&t.push(a(e.AMapUI)),e.Loca&&t.push(s(e.Loca)),Promise.all(t)}function a(i){return new Promise(function(s,t){var o=[];if(i.plugins)for(var e=0;e<i.plugins.length;e+=1)-1==c.AMapUI.plugins.indexOf(i.plugins[e])&&o.push(i.plugins[e]);if(p.AMapUI===l.failed)t("前次请求 AMapUI 失败");else if(p.AMapUI===l.notload){p.AMapUI=l.loading,c.AMapUI.version=i.version||c.AMapUI.version,e=c.AMapUI.version;var a=document.body||document.head,n=document.createElement("script");n.type="text/javascript",n.src="https://webapi.amap.com/ui/"+e+"/main.js",n.onerror=function(e){p.AMapUI=l.failed,t("请求 AMapUI 失败")},n.onload=function(){if(p.AMapUI=l.loaded,o.length)window.AMapUI.loadUI(o,function(){for(var e=0,t=o.length;e<t;e++){var a=o[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(s();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()});else for(s();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()},a.appendChild(n)}else p.AMapUI===l.loaded?i.version&&i.version!==c.AMapUI.version?t("不允许多个版本 AMapUI 混用"):o.length?window.AMapUI.loadUI(o,function(){for(var e=0,t=o.length;e<t;e++){var a=o[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}s()}):s():i.version&&i.version!==c.AMapUI.version?t("不允许多个版本 AMapUI 混用"):d.AMapUI.push(function(e){e?t(e):o.length?window.AMapUI.loadUI(o,function(){for(var e=0,t=o.length;e<t;e++){var a=o[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}s()}):s()})})}function s(i){return new Promise(function(e,t){if(c.AMap.version.startsWith("2.0"))t("Loca 暂不适配 JSAPI 2.0,请使用 1.4.15");else if(p.Loca===l.failed)t("前次请求 Loca 失败");else if(p.Loca===l.notload){p.Loca=l.loading,c.Loca.version=i.version||c.Loca.version;var a=c.Loca.version,s=c.key,o=document.body||document.head,n=document.createElement("script");n.type="text/javascript",n.src="https://webapi.amap.com/loca?v="+a+"&key="+s,n.onerror=function(e){p.Loca=l.failed,t("请求 AMapUI 失败")},n.onload=function(){for(p.Loca=l.loaded,e();d.Loca.length;)d.Loca.splice(0,1)[0]()},o.appendChild(n)}else p.Loca===l.loaded?i.version&&i.version!==c.Loca.version?t("不允许多个版本 Loca 混用"):e():i.version&&i.version!==c.Loca.version?t("不允许多个版本 Loca 混用"):d.Loca.push(function(e){e?t(e):t()})})}var l,e,c,p,d,m,t;if(window)return(e=l=l||{}).notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed",c={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},p={AMap:l.notload,AMapUI:l.notload,Loca:l.notload},d={AMap:[],AMapUI:[],Loca:[]},m=[],t=function(e){"function"==typeof(o=function(){n.length?window.AMap.plugin(n,function(){r(i).then(function(){t(window.AMap)}).catch(a)}):r(i).then(function(){t(window.AMap)}).catch(a)})&&(p.AMap===l.loaded?o(window.AMap):m.push(o))},{load:function(i){return new Promise(function(t,a){if(p.AMap==l.failed)a("");else if(p.AMap==l.notload){var e=i.key,s=i.version,o=i.plugins;e?(window.AMap&&"lbs.amap.com"!==location.host&&a("禁止多种API加载方式混用"),c.key=e,c.AMap.version=s||c.AMap.version,c.AMap.plugins=o||c.AMap.plugins,p.AMap=l.loading,s=document.body||document.head,window.___onAPILoaded=function(e){if(delete window.___onAPILoaded,e)p.AMap=l.failed,a(e);else for(p.AMap=l.loaded,r(i).then(function(){t(window.AMap)}).catch(a);m.length;)m.splice(0,1)[0]()},(o=document.createElement("script")).type="text/javascript",o.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+c.AMap.version+"&key="+e+"&plugin="+c.AMap.plugins.join(","),o.onerror=function(e){p.AMap=l.failed,a(e)},s.appendChild(o)):a("请填写key")}else if(p.AMap==l.loaded)if(i.key&&i.key!==c.key)a("多个不一致的 key");else if(i.version&&i.version!==c.AMap.version)a("不允许多个版本 JSAPI 混用");else{if(e=[],i.plugins)for(s=0;s<i.plugins.length;s+=1)-1==c.AMap.plugins.indexOf(i.plugins[s])&&e.push(i.plugins[s]);e.length?window.AMap.plugin(e,function(){r(i).then(function(){t(window.AMap)}).catch(a)}):r(i).then(function(){t(window.AMap)}).catch(a)}else if(i.key&&i.key!==c.key)a("多个不一致的 key");else if(i.version&&i.version!==c.AMap.version)a("不允许多个版本 JSAPI 混用");else{var n=[];if(i.plugins)for(s=0;s<i.plugins.length;s+=1)-1==c.AMap.plugins.indexOf(i.plugins[s])&&n.push(i.plugins[s]);"function"==typeof(o=function(){n.length?window.AMap.plugin(n,function(){r(i).then(function(){t(window.AMap)}).catch(a)}):r(i).then(function(){t(window.AMap)}).catch(a)})&&(p.AMap===l.loaded?o(window.AMap):m.push(o))}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,c={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},p={AMap:l.notload,AMapUI:l.notload,Loca:l.notload},d={AMap:[],AMapUI:[],Loca:[]}}};throw Error("AMap JSAPI can only be used in Browser.")}()},b149:function(e,t,a){"use strict";a("2d45")},cbe1:function(e,t,a){"use strict";a("51e5")},da7e:function(e,t,a){"use strict";var s=a("365c"),o={name:"uploadPicInput",props:{value:String,size:{default:"default",type:String},placeholder:{type:String,default:"图片链接"},showInput:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:Number,icon:{type:String,default:"ios-cloud-upload-outline"}},data:function(){return{accessToken:{},currentValue:this.value,loading:!1,viewImage:!1,uploadFileUrl:s.nb}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")}},handleFormatError:function(e){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件"})},handleMaxSize:function(e){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件大小过大, 不得超过1M."})},beforeUpload:function(){return this.loading=!0},handleSuccess:function(e,t){this.loading=!1,e.success&&(this.currentValue=e.result,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue))},handleError:function(e,t,a){this.loading=!1,this.$Message.error(e.toString())},handleChange:function(e){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue),this.$attrs.rollback&&this.$attrs.rollback()},setCurrentValue:function(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value:function(e){this.setCurrentValue(e)}},created:function(){this.init()}},a=(a("b149"),a("2877")),a=Object(a.a)(o,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{display:"flex"}},[e("Input",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],attrs:{placeholder:t.placeholder,size:t.size,disabled:t.disabled,readonly:t.readonly,maxlength:t.maxlength},on:{"on-change":t.handleChange},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},[e("Poptip",{attrs:{slot:"append",transfer:"",trigger:"hover",title:"图片预览",placement:"right"},slot:"append"},[e("Icon",{staticClass:"see-icon",attrs:{type:"md-eye"}}),e("div",{attrs:{slot:"content"},slot:"content"},[e("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:t.currentValue,alt:"该资源不存在"}}),e("a",{staticStyle:{"margin-top":"5px","text-align":"right",display:"block"},on:{click:function(e){t.viewImage=!0}}},[t._v("查看大图")])])],1)],1),e("Upload",{ref:"up",staticClass:"upload",attrs:{action:t.uploadFileUrl,headers:t.accessToken,"on-success":t.handleSuccess,"on-error":t.handleError,format:["jpg","jpeg","png","gif","bmp"],accept:".jpg, .jpeg, .png, .gif, .bmp","max-size":1024,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.beforeUpload,"show-upload-list":!1}},[e("Button",{attrs:{loading:t.loading,size:t.size,disabled:t.disabled}},[t._v("上传图片")])],1)],1),e("Modal",{attrs:{title:"图片预览",styles:{top:"30px"},draggable:""},model:{value:t.viewImage,callback:function(e){t.viewImage=e},expression:"viewImage"}},[e("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:t.currentValue,alt:"该资源不存在"}}),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:function(e){t.viewImage=!1}}},[t._v("关闭")])],1)])],1)},[],!1,null,"75ceb5cf",null);t.a=a.exports}}]);