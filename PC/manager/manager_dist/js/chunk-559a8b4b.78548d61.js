(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-559a8b4b"],{"2a97":function(t,e,o){t.exports=o.p+"img/qrcode.26457031.svg"},"90e0":function(t,e,o){"use strict";function a(t,e){var o="未知",a="red";return"NEW"==e.row.promotionStatus?(o="未开始",a="geekblue"):"START"==e.row.promotionStatus?(o="已开始",a="green"):"END"==e.row.promotionStatus?(o="已结束",a="red"):"CLOSE"==e.row.promotionStatus&&(o="已关闭",a="red"),t("div",[t("Tag",{props:{color:a}},o)])}function s(t,e){var o="未知",a="red";return"ALL"==e.row.scopeType?(o="全品类",a="default"):"PORTION_GOODS_CATEGORY"==e.row.scopeType?(o="商品分类",a="yellow"):"PORTION_SHOP_CATEGORY"==e.row.scopeType?(o="店铺分类",a="pink"):"PORTION_GOODS"==e.row.scopeType&&(o="指定商品",a="magenta"),t("div",[t("Tag",{props:{color:a}},o)])}o.d(e,"b",function(){return a}),o.d(e,"a",function(){return s})},e2da:function(t,e,s){"use strict";s.r(e);var n=s("f74c"),o=s("658f"),o=s.n(o),a=s("90e0"),o={name:"pointsGoods",components:{"vue-qr":o.a},data:function(){return{loading:!0,searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},statusList:[{label:"未开始",value:"NEW"},{label:"已开始",value:"START"},{label:"已结束",value:"END"},{label:"已关闭",value:"CLOSE"}],columns:[{title:"商品名称",slot:"goodsName",minWidth:150,fixed:"left",tooltip:!0},{title:"市场价",slot:"price",width:100},{title:"结算价",slot:"settlementPrice",width:100},{title:"库存数量",slot:"quantity",width:100},{title:"活动剩余库存",key:"activeStock",width:150},{title:"兑换积分",key:"points",width:100},{title:"所属店铺",key:"storeName",width:100},{title:"活动开始时间",slot:"startTime",minWidth:150},{title:"状态",key:"promotionStatus",width:100,render:function(t,e){return Object(a.b)(t,e)}},{title:"分类",key:"pointsGoodsCategoryName",width:100},{title:"操作",slot:"action",align:"center",fixed:"right",width:150}],data:[],total:0}},methods:{init:function(){this.getDataList()},addPointsGoods:function(){this.$router.push({name:"add-points-goods"})},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList()},changePageSize:function(t){this.searchForm.pageNumber=1,this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.searchForm.pointsS&&(this.searchForm.points=this.searchForm.pointsS+"_"+(this.searchForm.pointsE||"")),this.getDataList()},getDataList:function(){var e=this;this.loading=!0,Object(n.C)(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)})},edit:function(t){this.$router.push({name:"edit-points-goods",query:{id:t}})},statusChanged:function(t,e,o,a){var s=this,i="",r={};"START"==e?(i="开启",r={startTime:o,endTime:a}):"CLOSE"==e&&(i="关闭"),this.$Modal.confirm({title:"确认"+i,content:"您确认要"+i+"此积分商品?",loading:!0,onOk:function(){Object(n.l)(t,r).then(function(t){s.$Modal.remove(),t.success&&(s.$Message.success(i+"成功"),s.getDataList())})}})},close:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除此积分商品?",loading:!0,onOk:function(){Object(n.i)(t).then(function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getDataList())})}})}},mounted:function(){this.init()}},i=s("2877"),i=Object(i.a)(o,function(){var o=this,a=o._self._c;return a("div",{staticClass:"search"},[a("Card",[a("Row",[a("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:o.searchForm,inline:"","label-width":70}},[a("Form-item",{attrs:{label:"商品名称"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入商品名称",clearable:""},model:{value:o.searchForm.goodsName,callback:function(t){o.$set(o.searchForm,"goodsName",t)},expression:"searchForm.goodsName"}})],1),a("Form-item",{attrs:{label:"积分区间"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入开始区间",clearable:""},model:{value:o.searchForm.pointsS,callback:function(t){o.$set(o.searchForm,"pointsS",t)},expression:"searchForm.pointsS"}}),o._v(" - "),a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入结束区间",clearable:""},model:{value:o.searchForm.pointsE,callback:function(t){o.$set(o.searchForm,"pointsE",t)},expression:"searchForm.pointsE"}})],1),a("Form-item",{attrs:{label:"状态"}},[a("Select",{staticStyle:{width:"200px"},model:{value:o.searchForm.promotionStatus,callback:function(t){o.$set(o.searchForm,"promotionStatus",t)},expression:"searchForm.promotionStatus"}},o._l(o.statusList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[o._v(o._s(t.label))])}),1)],1),a("Form-item",{attrs:{label:"SKU编码"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入SKU编码",clearable:""},model:{value:o.searchForm.skuId,callback:function(t){o.$set(o.searchForm,"skuId",t)},expression:"searchForm.skuId"}})],1),a("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:o.handleSearch}},[o._v("搜索")])],1)],1),a("Row",{staticClass:"operation padding-row"},[a("Button",{attrs:{type:"primary"},on:{click:o.addPointsGoods}},[o._v("添加积分商品")])],1),a("Table",{ref:"table",attrs:{loading:o.loading,border:"",columns:o.columns,data:o.data},scopedSlots:o._u([{key:"goodsName",fn:function(t){var e=t.row;return[a("div",[a("a",{staticClass:"mr_10",on:{click:function(t){return o.linkTo(e.goodsId,e.skuId)}}},[o._v(o._s(e.goodsName))]),a("Poptip",{attrs:{trigger:"hover",title:"扫码在手机中查看",transfer:""}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("vue-qr",{attrs:{text:o.wapLinkTo(e.goodsId,e.skuId),margin:0,colorDark:"#000",colorLight:"#fff",size:150}})],1),a("img",{staticClass:"hover-pointer",staticStyle:{"vertical-align":"middle"},attrs:{src:s("2a97"),width:"20",height:"20",alt:""}})])],1)]}},{key:"price",fn:function(t){t=t.row;return[a("div",[o._v(o._s(o._f("unitPrice")(t.originalPrice,"￥")))])]}},{key:"settlementPrice",fn:function(t){t=t.row;return[a("div",[o._v(o._s(o._f("unitPrice")(t.settlementPrice,"￥")))])]}},{key:"quantity",fn:function(t){t=t.row;return[a("div",[o._v(o._s(t.activeStock))])]}},{key:"startTime",fn:function(t){t=t.row;return[a("div",[o._v(o._s(t.startTime))]),a("div",[o._v(o._s(t.endTime))])]}},{key:"action",fn:function(t){var e=t.row;return["CLOSE"===e.promotionStatus||"NEW"===e.promotionStatus?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(t){return o.edit(e.id)}}},[o._v("编辑")]):o._e(),"START"===e.promotionStatus||"NEW"===e.promotionStatus?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(t){return o.statusChanged(e.id,"CLOSE")}}},[o._v("关闭")]):o._e(),"CLOSE"===e.promotionStatus||"END"===e.promotionStatus?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(t){return o.close(e.id)}}},[o._v("删除")]):o._e()]}}])}),a("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:o.searchForm.pageNumber,total:o.total,"page-size":o.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":o.changePage,"on-page-size-change":o.changePageSize}})],1)],1)],1)},[],!1,null,null,null);e.default=i.exports}}]);