(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45f95328"],{"2a97":function(t,e,o){t.exports=o.p+"img/qrcode.26457031.svg"},ae81:function(t,e,o){},e0c5:function(t,e,o){"use strict";o("ae81")},f82c:function(t,e,n){"use strict";n.r(e);var o=n("f74c"),r=n("c40e"),i=n("658f");function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(){F=function(){return a};var a={},t=Object.prototype,s=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,o){return t[e]=o}}function l(t,e,o,r){var n,i,a,l,e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),r=new w(r||[]);return e._invoke=(n=t,i=o,a=r,l="suspendedStart",function(t,e){if("executing"===l)throw new Error("Generator is already running");if("completed"===l){if("throw"===t)throw e;return L()}for(a.method=t,a.arg=e;;){var o=a.delegate;if(o){o=function t(e,o){var r=e.iterator[o.method];if(void 0===r){if(o.delegate=null,"throw"===o.method){if(e.iterator.return&&(o.method="return",o.arg=void 0,t(e,o),"throw"===o.method))return u;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=c(r,e.iterator,o.arg);if("throw"===r.type)return o.method="throw",o.arg=r.arg,o.delegate=null,u;r=r.arg;return r?r.done?(o[e.resultName]=r.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=void 0),o.delegate=null,u):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,u)}(o,a);if(o){if(o===u)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===l)throw l="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);l="executing";o=c(n,i,a);if("normal"===o.type){if(l=a.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(l="completed",a.method="throw",a.arg=o.arg)}}),e}function c(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(t){return{type:"throw",arg:t}}}a.wrap=l;var u={};function f(){}function p(){}function d(){}var e={},m=(i(e,r,function(){return this}),Object.getPrototypeOf),m=m&&m(m(x([]))),h=(m&&m!==t&&s.call(m,r)&&(e=m),d.prototype=f.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function y(a,l){var e;this._invoke=function(o,r){function t(){return new l(function(t,e){!function e(t,o,r,n){var i,t=c(a[t],a,o);if("throw"!==t.type)return(o=(i=t.arg).value)&&"object"==_(o)&&s.call(o,"__await")?l.resolve(o.__await).then(function(t){e("next",t,r,n)},function(t){e("throw",t,r,n)}):l.resolve(o).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,n)});n(t.arg)}(o,r,t,e)})}return e=e?e.then(t,t):t()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function x(e){if(e){var o,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return o=-1,(t=function t(){for(;++o<e.length;)if(s.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:L}}function L(){return{value:void 0,done:!0}}return i(h,"constructor",p.prototype=d),i(d,"constructor",p),p.displayName=i(d,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,n,"GeneratorFunction")),t.prototype=Object.create(h),t},a.awrap=function(t){return{__await:t}},g(y.prototype),i(y.prototype,o,function(){return this}),a.AsyncIterator=y,a.async=function(t,e,o,r,n){void 0===n&&(n=Promise);var i=new y(l(t,e,o,r),n);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},g(h),i(h,n,"Generator"),i(h,r,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),a.keys=function(o){var t,r=[];for(t in o)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in o)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=x,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var r=this;function t(t,e){return i.type="throw",i.arg=o,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e],i=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var a=s.call(n,"catchLoc"),l=s.call(n,"finallyLoc");if(a&&l){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}var i=(n=n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc?null:n)?n.completion:{};return i.type=t,i.arg=e,n?(this.method="next",this.next=n.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),b(o),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var o,r,n=this.tryEntries[e];if(n.tryLoc===t)return"throw"===(o=n.completion).type&&(r=o.arg,b(n)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:x(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=void 0),u}},a}function s(t,e,o,r,n,i,a){try{var l=t[i](a),s=l.value}catch(t){return o(t)}l.done?e(s):Promise.resolve(s).then(r,n)}var i={name:"add-full-discount",components:{"vue-qr":n.n(i).a},data:function(){var o=this;return{form:{discountType:"fullMinusFlag",scopeType:"ALL",promotionGoodsList:[]},id:this.$route.query.id,couponList:[],giftList:[],giftLoading:!1,columns:[{type:"selection",width:60,align:"center"},{title:"商品名称",slot:"goodsName",minWidth:120},{title:"商品价格",key:"price",minWidth:40,render:function(t,e){return t("div",o.$options.filters.unitPrice(e.row.price,"￥"))}},{title:"库存",key:"quantity",minWidth:40}],options:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}}}},mounted:function(){var l,e=this;return l=F().mark(function t(){return F().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.id&&e.getDetail(),e.getCouponList(),e.getGiftList();case 3:case"end":return t.stop()}},t)}),function(){var t=this,a=arguments;return new Promise(function(e,o){var r=l.apply(t,a);function n(t){s(r,e,o,n,i,"next",t)}function i(t){s(r,e,o,n,i,"throw",t)}n(void 0)})}()},methods:{getDetail:function(){var e=this;Object(o.p)(this.id).then(function(t){t=t.result;"ALL"===!t.scopeType&&(t.promotionGoodsList=[]),t.fullMinusFlag?(t.discountType="fullMinusFlag",delete t.fullMinusFlag):(t.discountType="fullMinusFlag",delete t.fullRateFlag),t.rangeTime=[],t.rangeTime.push(new Date(t.startTime),new Date(t.endTime)),e.form=t})},getCouponList:function(t){var e=this,t={pageSize:10,pageNumber:0,getType:"ACTIVITY",storeId:"",couponName:t,promotionStatus:"START"};this.couponLoading=!0,Object(o.z)(t).then(function(t){e.couponLoading=!1,t.success&&(e.couponList=t.result.records)})},getGiftList:function(t){var e=this,t={pageSize:10,pageNumber:1,id:t===this.form.giftId?this.form.giftId:null,goodsName:t===this.form.giftId?null:t,marketEnable:"UPPER",authFlag:"PASS"};this.giftLoading=!0,Object(r.r)(t).then(function(t){e.giftLoading=!1,t.success&&(e.giftList=t.result.records)})}}},a=(n("e0c5"),n("2877")),a=Object(a.a)(i,function(){var o=this,r=o._self._c;return r("div",[r("Card",[r("Form",{ref:"form",attrs:{model:o.form,"label-width":120}},[r("div",{staticClass:"base-info-item"},[r("h4",[o._v("基本信息")]),r("div",{staticClass:"form-item-view"},[r("FormItem",{attrs:{label:"活动名称",prop:"promotionName"}},[r("Input",{staticStyle:{width:"260px"},attrs:{type:"text",disabled:"",placeholder:"活动名称",clearable:""},model:{value:o.form.promotionName,callback:function(t){o.$set(o.form,"promotionName",t)},expression:"form.promotionName"}})],1),r("FormItem",{attrs:{label:"活动时间",prop:"rangeTime"}},[r("DatePicker",{staticStyle:{width:"320px"},attrs:{type:"datetimerange",disabled:"",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择",options:o.options},model:{value:o.form.rangeTime,callback:function(t){o.$set(o.form,"rangeTime",t)},expression:"form.rangeTime"}})],1),r("FormItem",{attrs:{label:"活动描述",prop:"description"}},[r("Input",{staticStyle:{width:"260px"},attrs:{disabled:"",type:"textarea",rows:4,clearable:""},model:{value:o.form.description,callback:function(t){o.$set(o.form,"description",t)},expression:"form.description"}})],1)],1),r("h4",[o._v("优惠设置")]),r("div",{staticClass:"form-item-view"},[r("FormItem",{attrs:{label:"优惠门槛",prop:"fullMoney"}},[r("Input",{staticStyle:{width:"260px"},attrs:{type:"text",disabled:"",placeholder:"优惠门槛",clearable:""},model:{value:o.form.fullMoney,callback:function(t){o.$set(o.form,"fullMoney",t)},expression:"form.fullMoney"}}),r("span",{staticClass:"describe"},[o._v("消费达到当前金额可以参与优惠")])],1),r("FormItem",{attrs:{label:"赠送优惠券"}},[r("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:o.form.discountType,callback:function(t){o.$set(o.form,"discountType",t)},expression:"form.discountType"}},[r("Radio",{attrs:{label:"fullMinusFlag",disabled:""}},[o._v("减现金")]),r("Radio",{attrs:{label:"fullRateFlag",disabled:""}},[o._v("打折")])],1)],1),"fullMinusFlag"==o.form.discountType?r("FormItem",{attrs:{label:"优惠金额",prop:"fullMinus"}},[r("Input",{staticStyle:{width:"260px"},attrs:{type:"text",disabled:"",placeholder:"优惠金额",clearable:""},model:{value:o.form.fullMinus,callback:function(t){o.$set(o.form,"fullMinus",t)},expression:"form.fullMinus"}})],1):o._e(),"fullRateFlag"==o.form.discountType?r("FormItem",{attrs:{label:"优惠折扣",prop:"fullRate"}},[r("Input",{staticStyle:{width:"260px"},attrs:{type:"text",placeholder:"优惠折扣",disabled:"",clearable:""},model:{value:o.form.fullRate,callback:function(t){o.$set(o.form,"fullRate",t)},expression:"form.fullRate"}}),r("span",{staticClass:"describe"},[o._v("优惠折扣为0-10之间数字，可有一位小数")])],1):o._e(),r("FormItem",{attrs:{label:"额外赠送"}},[r("Checkbox",{attrs:{disabled:""},model:{value:o.form.freeFreightFlag,callback:function(t){o.$set(o.form,"freeFreightFlag",t)},expression:"form.freeFreightFlag"}},[o._v("免邮费")]),o._v("  "),r("Checkbox",{attrs:{disabled:""},model:{value:o.form.couponFlag,callback:function(t){o.$set(o.form,"couponFlag",t)},expression:"form.couponFlag"}},[o._v("送优惠券")]),o._v("  "),r("Checkbox",{attrs:{disabled:""},model:{value:o.form.giftFlag,callback:function(t){o.$set(o.form,"giftFlag",t)},expression:"form.giftFlag"}},[o._v("送赠品")]),o._v("  "),r("Checkbox",{attrs:{disabled:""},model:{value:o.form.pointFlag,callback:function(t){o.$set(o.form,"pointFlag",t)},expression:"form.pointFlag"}},[o._v("送积分")])],1),o.form.couponFlag?r("FormItem",{attrs:{label:"赠送优惠券",prop:"couponId"}},[r("Select",{staticStyle:{width:"280px"},attrs:{disabled:"NEW"!=o.form.promotionStatus,filterable:"","remote-method":o.getCouponList,placeholder:"输入优惠券名称搜索",loading:o.couponLoading},model:{value:o.form.couponId,callback:function(t){o.$set(o.form,"couponId",t)},expression:"form.couponId"}},o._l(o.couponList,function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[o._v(o._s(t.couponName))])}),1)],1):o._e(),o.form.giftFlag?r("FormItem",{attrs:{label:"赠品",prop:"giftId"}},[r("Select",{staticStyle:{width:"260px"},attrs:{filterable:"","remote-method":o.getGiftList,placeholder:"输入赠品名称搜索",disabled:"",loading:o.giftLoading},model:{value:o.form.giftId,callback:function(t){o.$set(o.form,"giftId",t)},expression:"form.giftId"}},o._l(o.giftList,function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[o._v(o._s(t.goodsName))])}),1)],1):o._e(),o.form.pointFlag?r("FormItem",{attrs:{label:"赠积分",prop:"point"}},[r("Input",{staticStyle:{width:"260px"},attrs:{type:"number",disabled:""},model:{value:o.form.point,callback:function(t){o.$set(o.form,"point",t)},expression:"form.point"}})],1):o._e(),r("FormItem",{attrs:{label:"使用范围",prop:"scopeType"}},[r("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:o.form.scopeType,callback:function(t){o.$set(o.form,"scopeType",t)},expression:"form.scopeType"}},[r("Radio",{attrs:{label:"ALL",disabled:""}},[o._v("全品类")]),r("Radio",{attrs:{label:"PORTION_GOODS",disabled:""}},[o._v("指定商品")])],1)],1),"PORTION_GOODS"==o.form.scopeType?r("FormItem",{staticStyle:{width:"100%"}},[r("Table",{attrs:{border:"",columns:o.columns,data:o.form.promotionGoodsList},scopedSlots:o._u([{key:"goodsName",fn:function(t){var e=t.row;return[r("div",[r("a",{staticClass:"mr_10",on:{click:function(t){return o.linkTo(e.goodsId,e.skuId)}}},[o._v(o._s(e.goodsName))]),r("Poptip",{attrs:{trigger:"hover",title:"扫码在手机中查看",transfer:""}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("vue-qr",{attrs:{text:o.wapLinkTo(e.goodsId,e.skuId),margin:0,colorDark:"#000",colorLight:"#fff",size:150}})],1),r("img",{staticClass:"hover-pointer",staticStyle:{"vertical-align":"middle"},attrs:{src:n("2a97"),width:"20",height:"20",alt:""}})])],1)]}}],null,!1,673283401)})],1):o._e(),r("div",[r("Button",{on:{click:function(t){return o.$router.push({name:"promotions/full-discount"})}}},[o._v("返回")])],1)],1)])])],1)],1)},[],!1,null,"51fe8d88",null);e.default=a.exports}}]);