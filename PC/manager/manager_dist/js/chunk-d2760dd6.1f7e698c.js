(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d2760dd6"],{"90e0":function(t,e,o){"use strict";function a(t,e){var o="未知",a="red";return"NEW"==e.row.promotionStatus?(o="未开始",a="geekblue"):"START"==e.row.promotionStatus?(o="已开始",a="green"):"END"==e.row.promotionStatus?(o="已结束",a="red"):"CLOSE"==e.row.promotionStatus&&(o="已关闭",a="red"),t("div",[t("Tag",{props:{color:a}},o)])}function r(t,e){var o="未知",a="red";return"ALL"==e.row.scopeType?(o="全品类",a="default"):"PORTION_GOODS_CATEGORY"==e.row.scopeType?(o="商品分类",a="yellow"):"PORTION_SHOP_CATEGORY"==e.row.scopeType?(o="店铺分类",a="pink"):"PORTION_GOODS"==e.row.scopeType&&(o="指定商品",a="magenta"),t("div",[t("Tag",{props:{color:a}},o)])}o.d(e,"b",function(){return a}),o.d(e,"a",function(){return r})},aaa7:function(t,e,o){"use strict";o.r(e);var a=o("f74c"),r=o("90e0"),s={data:function(){return{selectDate:[],total:0,loading:!1,searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},columns:[{title:"活动名称",key:"promotionName",minWidth:120},{title:"开始时间",key:"startTime",width:170},{title:"结束时间",key:"endTime",width:170},{title:"店铺名称",key:"storeName",minWidth:60},{title:"活动类型",slot:"promotionType",minWidth:60},{title:"活动状态",key:"promotionStatus",minWidth:60,render:function(t,e){return Object(r.b)(t,e)}},{title:"操作",slot:"action",align:"center",width:140}],data:[]}},methods:{init:function(){this.getDataList()},openOrClose:function(t){var e=this;"START"===t.promotionStatus&&this.$Modal.confirm({title:"提示",content:"确认".concat("关闭","此活动吗?需要一定时间才能生效，请耐心等待"),loading:!0,onOk:function(){Object(a.J)(t.id).then(function(t){e.$Modal.remove(),t.success&&(e.$Message.success("".concat("关闭","成功")),e.getDataList())})}})},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList()},changePageSize:function(t){this.searchForm.pageNumber=1,this.searchForm.pageSize=t,this.getDataList()},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,this.selectDate&&this.selectDate[0]&&this.selectDate[1]?(this.searchForm.startTime=this.selectDate[0].getTime(),this.searchForm.endTime=this.selectDate[1].getTime()):(this.searchForm.startTime=null,this.searchForm.endTime=null),Object(a.q)(this.searchForm).then(function(t){e.loading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total)})},view:function(t){this.$router.push({name:"full-discount-detail",query:{id:t.id}})}},mounted:function(){this.init()}},o=o("2877"),o=Object(o.a)(s,function(){var o=this,a=o._self._c;return a("div",{staticClass:"full-cut"},[a("Card",[a("Row",[a("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:o.searchForm,inline:"","label-width":70}},[a("Form-item",{attrs:{label:"活动名称",prop:"promotionName"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入活动名称",clearable:""},model:{value:o.searchForm.promotionName,callback:function(t){o.$set(o.searchForm,"promotionName",t)},expression:"searchForm.promotionName"}})],1),a("Form-item",{attrs:{label:"活动状态",prop:"promotionStatus"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:o.searchForm.promotionStatus,callback:function(t){o.$set(o.searchForm,"promotionStatus",t)},expression:"searchForm.promotionStatus"}},[a("Option",{attrs:{value:"NEW"}},[o._v("未开始")]),a("Option",{attrs:{value:"START"}},[o._v("已开始/上架")]),a("Option",{attrs:{value:"END"}},[o._v("已结束/下架")]),a("Option",{attrs:{value:"CLOSE"}},[o._v("紧急关闭/作废")])],1)],1),a("Form-item",{attrs:{label:"活动时间"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",clearable:"",placeholder:"选择起始时间"},model:{value:o.selectDate,callback:function(t){o.selectDate=t},expression:"selectDate"}})],1),a("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:o.handleSearch}},[o._v("搜索")])],1)],1),a("Table",{ref:"table",staticClass:"mt_10",attrs:{loading:o.loading,border:"",columns:o.columns,data:o.data,sortable:"custom"},scopedSlots:o._u([{key:"applyEndTime",fn:function(t){t=t.row;return[o._v(" "+o._s(o.unixDate(t.applyEndTime))+" ")]}},{key:"promotionType",fn:function(t){t=t.row;return[o._v(" "+o._s(t.fullMinusFlag?"满减":"满折")+" ")]}},{key:"hours",fn:function(t){t=t.row;return o._l(o.unixHours(t.hours),function(t){return a("Tag",{key:t},[o._v(o._s(t))])})}},{key:"action",fn:function(t){var e=t.row;return[a("div",[a("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return o.view(e)}}},[o._v("查看")]),"NEW"===e.promotionStatus||"START"===e.promotionStatus?a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"error",size:"small"},on:{click:function(t){return o.openOrClose(e)}}},[o._v("关闭")]):o._e()],1)]}}])}),a("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:o.searchForm.pageNumber,total:o.total,"page-size":o.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":o.changePage,"on-page-size-change":o.changePageSize}})],1)],1)],1)},[],!1,null,null,null);e.default=o.exports}}]);