(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d20fa8b"],{b524:function(t,e,i){"use strict";i.r(e);var o=i("f74c"),a={name:"pointsGoodsCategory",components:{TreeTable:i("910f").a},data:function(){return{submitLoading:!1,loading:!1,modalType:0,modalVisible:!1,modalTitle:"",showParent:!1,parentTitle:"",formAdd:{parentId:0,name:"",deleteFlag:0,level:0,sortOrder:1},formValidate:{name:[{required:!0,message:"商品分类名称不能为空"}]},columns:[{title:"分类名称",key:"name",minWidth:"120px"},{title:"操作",key:"action",align:"center",headerAlign:"center",width:"400px",type:"template",template:"action"}],tableData:[]}},methods:{init:function(){this.getAllList()},edit:function(t){this.modalType=1,this.modalTitle="编辑",this.formAdd.id=t.id,this.formAdd.name=t.name,this.formAdd.sortOrder=t.sortOrder,this.showParent=!1,this.modalVisible=!0},addParent:function(){this.modalType=0,this.modalTitle="添加积分商品分类",this.parentTitle="顶级分类",this.showParent=!0,this.$refs.form.resetFields(),delete this.formAdd.id,this.formAdd.parentId=0,this.modalVisible=!0},Submit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.submitLoading=!0,0===e.modalType?(delete e.formAdd.id,Object(o.b)(e.formAdd).then(function(t){e.submitLoading=!1,t.success&&(e.$Message.success("添加成功"),e.getAllList(),e.modalVisible=!1,e.$refs.form.resetFields())})):Object(o.N)(e.formAdd).then(function(t){e.submitLoading=!1,t.success&&(e.$Message.success("修改成功"),e.getAllList(),e.modalVisible=!1,e.$refs.form.resetFields())}))})},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+t.name+" ?",loading:!0,onOk:function(){Object(o.h)(t.id).then(function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getAllList())})}})},getAllList:function(){var e=this;this.loading=!0,Object(o.B)().then(function(t){e.loading=!1,t.success&&(e.tableData=t.result.records)})}},mounted:function(){this.init()}},i=i("2877"),i=Object(i.a)(a,function(){var i=this,t=i._self._c;return t("div",[t("Card",[t("div",{staticClass:"operation mb_10"},[t("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:i.addParent}},[i._v("添加积分商品分类")]),t("Button",{attrs:{icon:"md-refresh"},on:{click:i.init}},[i._v("刷新")])],1),t("tree-table",{ref:"treeTable",attrs:{size:"default",loading:i.loading,data:i.tableData,columns:i.columns,border:!0,"show-index":!1,"is-fold":!0,"expand-type":!1,"primary-key":"id"},scopedSlots:i._u([{key:"action",fn:function(e){return[t("Button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return i.edit(e.row)}}},[i._v("编辑")]),t("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return i.remove(e.row)}}},[i._v("删除")])]}}])})],1),t("Modal",{attrs:{title:i.modalTitle,"mask-closable":!1,width:500},model:{value:i.modalVisible,callback:function(t){i.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:i.formAdd,"label-width":100,rules:i.formValidate}},[t("FormItem",{attrs:{label:"分类名称",prop:"name"}},[t("Input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:i.formAdd.name,callback:function(t){i.$set(i.formAdd,"name",t)},expression:"formAdd.name"}})],1),t("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[t("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,clearable:""},model:{value:i.formAdd.sortOrder,callback:function(t){i.$set(i.formAdd,"sortOrder",t)},expression:"formAdd.sortOrder"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){i.modalVisible=!1}}},[i._v("取消")]),t("Button",{attrs:{type:"primary",loading:i.submitLoading},on:{click:i.Submit}},[i._v("提交")])],1)],1)],1)},[],!1,null,"86d9e624",null);e.default=i.exports}}]);