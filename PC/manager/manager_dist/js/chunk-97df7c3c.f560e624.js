(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-97df7c3c"],{"58d0":function(e,t,a){"use strict";a("a765")},a765:function(e,t,a){},aa9f:function(e,t,a){"use strict";a.r(t);var l=a("365c");function r(t,e){var a,d=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),d.push.apply(d,a)),d}function n(d){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){var t,a;t=d,a=i[e=e],e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(i,e))})}return d}var d={data:function(){return{asyncLoading:!1,num:10,modalFlag:!1,timerNum:10,data:[],id:0,addValidate:{parentName:"无父级"},formValidate:{adCode:"",cityCode:"",center:"",name:"",orderNum:"",level:""},ruleValidate:{adCode:[{required:!0,message:"区域编码不能为空",trigger:"blur"}],center:[{required:!0,message:"经纬度不能为空",trigger:"blur"}],name:[{required:!0,message:"名称不能为空",trigger:"blur"}]}}},mounted:function(){this.init()},methods:{submit:function(){var t=this;delete this.addValidate.children,Object(l.d)(this.addValidate).then(function(e){e.success&&t.$Message.success("添加成功!请稍后查看")})},handleInsert:function(){var a=this;if(!this.formValidate.parentId)return this.$Message.error("请选择要添加的数据"),!1;this.addValidate=JSON.parse(JSON.stringify(this.formValidate));var d,i=["country","province","city","district","street"];i.forEach(function(e,t){a.addValidate.level==e&&(d=t==i.length-1?i[t-1]:i[t+1])}),this.addValidate.level=d,this.addValidate.parentId=this.formValidate.id,this.addValidate.parentName=this.formValidate.name,delete this.addValidate.id,delete this.addValidate.createBy,delete this.addValidate.createTime,delete this.addValidate.updateBy,delete this.addValidate.updateTime,delete this.addValidate.selected,this.addValidate.name="",this.addValidate.center="",this.modalFlag=!0},handleDel:function(){var t=this;this.$Modal.confirm({title:"确定删除？",content:"删除后店铺以及用户地区绑定数据将全部错乱",onOk:function(){Object(l.l)(t.formValidate.id).then(function(e){e.success&&t.$Message.success("删除成功!,请稍后查看数据")})}})},handleUpdate:function(e){var t=this;delete this.formValidate.createBy,delete this.formValidate.createTime,delete this.formValidate.updateBy,delete this.formValidate.updateTime,delete this.formValidate.selected,this.$refs[e].validate(function(e){e?(t.formValidate.adCode||(t.formValidate.adCode=""),Object(l.lb)(t.formValidate.id,t.formValidate).then(function(e){e.result&&t.$Message.success("修改成功!,请稍后查看数据")})):t.$Message.error("请选择数据")})},changeTree:function(e,t){"null"==t.cityCode?t.cityCode="":t.cityCode,this.$set(this,"formValidate",t)},loadData:function(i,t){i.loading=!0,Object(l.A)(i.id).then(function(e){var d;e.result.length<=0?i.loading=!1:(d=[],e.result.forEach(function(e,t){var a;i.loading=!1,a=n(n({},e),{},{title:e.name,loading:!1,children:[]}),"street"!=e.level&&"香港特别行政区"!=i.label&&"澳门特别行政区"!=i.label||(a=n(n({},e),{},{title:e.name})),d.push(a)}),t(d))})},init:function(){var t=this;Object(l.A)(this.id).then(function(e){e.result&&e.result.forEach(function(e){e="台湾省"==e.name?n(n({},e),{},{title:e.name}):n(n({},e),{},{title:e.name,loading:!1,children:[]});t.data.push(e)})})},handleAsyncRegion:function(){var d=this;this.num=10,this.$Modal.confirm({title:"确定更新？",content:"更新后店铺以及用户地区绑定数据将全部错乱",onOk:function(){var t,a;d.asyncLoading=!0,d.$Message.info({duration:d.timerNum,render:function(e){return e("span",["地区数据将在".concat(d.num,"秒后更新"),e("a",{on:{click:function(){d.$Message.destroy(),d.asyncLoading=!1,clearInterval(a),clearTimeout(t)}}},"点击撤销")])}}),a=setInterval(function(){d.num--},1e3),t=setTimeout(function(){clearInterval(a),Object(l.g)().then(function(e){d.asyncLoading=!1,d.$Message.loading("地区数据正在更新中！")})},1e4)}})}}},a=(a("58d0"),a("2877")),a=Object(a.a)(d,function(){var t=this,e=t._self._c;return e("Card",[e("Row",{staticClass:"operation"},[e("Button",{attrs:{loading:t.asyncLoading,type:"primary",icon:"md-add"},on:{click:t.handleAsyncRegion}},[t._v("同步数据")])],1),e("div",{staticClass:"flex"},[e("Tree",{staticClass:"tree",attrs:{data:t.data,"load-data":t.loadData},on:{"on-select-change":t.changeTree}}),e("div",{staticClass:"form"},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[t.formValidate.adCode?e("FormItem",{attrs:{prop:"adCode",label:"区域编码"}},[e("Input",{model:{value:t.formValidate.adCode,callback:function(e){t.$set(t.formValidate,"adCode",e)},expression:"formValidate.adCode"}})],1):t._e(),e("FormItem",{attrs:{label:"城市代码",prop:"cityCode"}},[e("Input",{model:{value:t.formValidate.cityCode,callback:function(e){t.$set(t.formValidate,"cityCode",e)},expression:"formValidate.cityCode"}})],1),e("FormItem",{attrs:{label:"行政区划级别",prop:"cityCode"}},[e("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:t.formValidate.level,callback:function(e){t.$set(t.formValidate,"level",e)},expression:"formValidate.level"}},[e("Radio",{attrs:{disabled:"",label:"country"}},[t._v("国家")]),e("Radio",{attrs:{disabled:"",label:"province"}},[t._v("省份")]),e("Radio",{attrs:{disabled:"",label:"city"}},[t._v("市")]),e("Radio",{attrs:{disabled:"",label:"district"}},[t._v("区县")]),e("Radio",{attrs:{disabled:"",label:"street"}},[t._v("街道")])],1)],1),e("FormItem",{attrs:{label:"经纬度",prop:"center"}},[e("Input",{model:{value:t.formValidate.center,callback:function(e){t.$set(t.formValidate,"center",e)},expression:"formValidate.center"}})],1),e("FormItem",{attrs:{label:"名称",prop:"name"}},[e("Input",{model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),e("FormItem",{attrs:{label:"排序",prop:"orderNum"}},[e("Input",{model:{value:t.formValidate.orderNum,callback:function(e){t.$set(t.formValidate,"orderNum",e)},expression:"formValidate.orderNum"}})],1),e("div",{staticClass:"button-list"},[e("Button",{attrs:{type:"default"},on:{click:function(e){return t.handleUpdate("formValidate")}}},[t._v("修改")]),e("Button",{attrs:{type:"primary",ghost:""},on:{click:function(e){return t.handleInsert()}}},[t._v("添加")]),e("Button",{attrs:{type:"error"},on:{click:function(e){return t.handleDel("formValidate")}}},[t._v("删除")])],1)],1)],1)],1),e("Modal",{attrs:{title:"添加"},on:{"on-ok":t.submit},model:{value:t.modalFlag,callback:function(e){t.modalFlag=e},expression:"modalFlag"}},[e("Form",{ref:"addValidate",attrs:{model:t.addValidate,"label-width":100}},[e("FormItem",{attrs:{label:"父级"}},[e("Input",{attrs:{disabled:""},model:{value:t.addValidate.parentName,callback:function(e){t.$set(t.addValidate,"parentName",e)},expression:"addValidate.parentName"}})],1),e("FormItem",{attrs:{prop:"adCode",label:"区域编码"}},[e("Input",{model:{value:t.addValidate.adCode,callback:function(e){t.$set(t.addValidate,"adCode",e)},expression:"addValidate.adCode"}})],1),e("FormItem",{attrs:{label:"城市代码",prop:"cityCode"}},[e("Input",{model:{value:t.addValidate.cityCode,callback:function(e){t.$set(t.addValidate,"cityCode",e)},expression:"addValidate.cityCode"}})],1),e("FormItem",{attrs:{label:"经纬度",prop:"center"}},[e("Input",{model:{value:t.addValidate.center,callback:function(e){t.$set(t.addValidate,"center",e)},expression:"addValidate.center"}})],1),e("FormItem",{attrs:{label:"名称",prop:"name"}},[e("Input",{model:{value:t.addValidate.name,callback:function(e){t.$set(t.addValidate,"name",e)},expression:"addValidate.name"}})],1),e("FormItem",{attrs:{label:"排序",prop:"orderNum"}},[e("Input",{model:{value:t.addValidate.orderNum,callback:function(e){t.$set(t.addValidate,"orderNum",e)},expression:"addValidate.orderNum"}})],1)],1)],1)],1)},[],!1,null,"1529be95",null);t.default=a.exports}}]);