(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d2161db"],{c0a9:function(e,t,a){"use strict";a.r(t);var s=a("365c"),i={name:"log-manage",data:function(){return{openTip:!1,loading:!0,selectDate:null,showDev:!1,searchForm:{type:1,key:"",operatorName:"",pageNumber:1,pageSize:10,startDate:"",endDate:"",sort:"createTime",order:"desc"},columns:[{title:"操作名称",key:"name",width:150,fixed:"left",ellipsis:!1,tooltip:!0},{title:"日志内容",key:"customerLog",minWidth:200,fixed:"left",ellipsis:!1,tooltip:!0},{title:"操作用户",minWidth:115,key:"username",width:120,tooltip:!0},{title:"操作时间",key:"createTime",align:"center",width:170}],columns_dev:[{title:"操作名称",key:"name",minWidth:100,fixed:"left",ellipsis:!1,tooltip:!0},{title:"日志内容",key:"customerLog",minWidth:120,fixed:"left",ellipsis:!1,tooltip:!0},{title:"操作用户",key:"username",width:115},{title:"IP",key:"ip",width:150},{title:"IP信息",key:"ipInfo",width:150,ellipsis:!1,tooltip:!0},{title:"请求路径",width:150,ellipsis:!1,tooltip:!0,key:"requestUrl"},{title:"请求类型",key:"requestType",width:130,align:"center",filters:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],filterMultiple:!1,filterMethod:function(e,t){return"GET"==e?"GET"==t.requestType:"POST"==e?"POST"==t.requestType:"PUT"==e?"PUT"==t.requestType:"DELETE"==e?"DELETE"==t.requestType:void 0}},{title:"请求参数",minWidth:100,key:"requestParam",ellipsis:!1,tooltip:!0},{title:"耗时-毫秒",key:"costTime",width:140,align:"center",filters:[{label:"≤300毫秒",value:0},{label:"300毫秒<x<1000毫秒",value:.3},{label:">1000毫秒",value:1}],filterMultiple:!1,filterMethod:function(e,t){return 0==e?t.costTime<=300:.3==e?300<t.costTime&&t.costTime<1e3:1e3<t.costTime}},{title:"操作时间",key:"createTime",align:"center",width:170,sortType:"desc"}],data:[],total:0}},methods:{init:function(){this.getLogList()},changePage:function(e){this.searchForm.pageNumber=e,this.getLogList()},changePageSize:function(e){this.searchForm.pageNumber=1,this.searchForm.pageSize=e,this.getLogList()},selectDateRange:function(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},handleSearch:function(){this.searchForm.pageNumber=1,this.getLogList()},getLogList:function(){var t=this;this.loading=!0,Object(s.I)(this.searchForm).then(function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)})}},mounted:function(){this.init()}},a=a("2877"),a=Object(a.a)(i,function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("Card",[e("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:t.searchForm,inline:"","label-width":70}},[e("Form-item",{attrs:{label:"搜索日志",prop:"searchKey"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入搜索日志内容",clearable:""},model:{value:t.searchForm.searchKey,callback:function(e){t.$set(t.searchForm,"searchKey",e)},expression:"searchForm.searchKey"}})],1),e("Form-item",{attrs:{label:"操作人",prop:"operatorName"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入操作人",clearable:""},model:{value:t.searchForm.operatorName,callback:function(e){t.$set(t.searchForm,"operatorName",e)},expression:"searchForm.operatorName"}})],1),e("Form-item",{attrs:{label:"创建时间"}},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")])],1),e("Row",{staticClass:"operation padding-row"},[e("Button",{attrs:{icon:"md-refresh"},on:{click:t.getLogList}},[t._v("刷新")]),e("Button",{attrs:{type:"dashed"},on:{click:function(e){t.openTip=!t.openTip}}},[t._v(t._s(t.openTip?"关闭提示":"开启提示"))])],1),e("Row",{directives:[{name:"show",rawName:"v-show",value:t.openTip,expression:"openTip"}]},[e("Alert",{attrs:{"show-icon":""}},[e("span",[t._v("展示详细内容")]),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("i-switch",{attrs:{size:"large"},model:{value:t.showDev,callback:function(e){t.showDev=e},expression:"showDev"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("开发")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("普通")])])],1)],1),t.showDev?e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns_dev,data:t.data,sortable:"custom"}}):e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"}}),e("Row",{staticClass:"mt_10",attrs:{type:"flex",justify:"end"}},[e("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-totalzx":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)},[],!1,null,null,null);t.default=a.exports}}]);